<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java の Stream メモ | 0x1feb</title><meta name=keywords content="Java 8"><meta name=description content="Stream とは Java 8 から追加され、コレクションに対する集約操作をサポートした機能を持つ。 中間操作と終端操作を組み合わせてパイプラインにできるため、fo"><meta name=author content="Me"><link rel=canonical href=https://0x1feb.github.io/posts/2022/01/24/java-stream-memo/><link crossorigin=anonymous href=/assets/css/stylesheet.min.e21185e6c4b43ff34c81666f70aa4f80140274057866888c0a5c28addc9b7fd2.css integrity="sha256-4hGF5sS0P/NMgWZvcKpPgBQCdAV4ZoiMClwordybf9I=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.27cd435cc9ed6abb4b496581b151804f79f366c412620272bb94e2f5f598ebcc.js integrity="sha256-J81DXMntartLSWWBsVGAT3nzZsQSYgJyu5Ti9fWY68w=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://0x1feb.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://0x1feb.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://0x1feb.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://0x1feb.github.io/apple-touch-icon.png><link rel=mask-icon href=https://0x1feb.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.78.2"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Java の Stream メモ"><meta property="og:description" content="Stream とは Java 8 から追加され、コレクションに対する集約操作をサポートした機能を持つ。 中間操作と終端操作を組み合わせてパイプラインにできるため、fo"><meta property="og:type" content="article"><meta property="og:url" content="https://0x1feb.github.io/posts/2022/01/24/java-stream-memo/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-24T22:00:00+09:00"><meta property="article:modified_time" content="2022-01-24T22:00:00+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java の Stream メモ"><meta name=twitter:description content="Stream とは Java 8 から追加され、コレクションに対する集約操作をサポートした機能を持つ。 中間操作と終端操作を組み合わせてパイプラインにできるため、fo"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://0x1feb.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Java の Stream メモ","item":"https://0x1feb.github.io/posts/2022/01/24/java-stream-memo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java の Stream メモ","name":"Java の Stream メモ","description":"Stream とは Java 8 から追加され、コレクションに対する集約操作をサポートした機能を持つ。 中間操作と終端操作を組み合わせてパイプラインにできるため、fo","keywords":["Java 8"],"articleBody":"Stream とは Java 8 から追加され、コレクションに対する集約操作をサポートした機能を持つ。\n中間操作と終端操作を組み合わせてパイプラインにできるため、for 文による繰り返し処理を簡潔に記述できる。\nサンプルクラス User クラス 年齢と名前の情報のみを持つ、以下のユーザクラスを用いる。\npublic class User { private String name; private int age; public User(String name, int age) { this.name = name; this.age = age; } public String getName() { return name; } public void setName(String name) { this.name = name; } public int getAge() { return age; } public void setAge(int age) { this.age = age; } public String toString() { return \"name: \" + name + \", age: \" + age; } } User のコレクション コレクションは以下とする。\nListUser userList = new ArrayListUser(); userList.add(new User(\"John\", 40)); userList.add(new User(\"Paul\", 79)); userList.add(new User(\"George\", 58)); userList.add(new User(\"Ringo\", 81)); 要素を順番に処理 forEach userList.stream() .forEach(u - System.out.println(u)); // name: John, age: 40 // name: Paul, age: 79 // name: George, age: 58 // name: Ringo, age: 81  // 以下も同じ結果 userList.stream() .forEach(System.out::println); ラムダ式を受け取るが、別のメソッドをそのまま呼び出す場合、メソッドのみを渡すこともできる。\n順次/並列 stream ストリームは明示的に並列を指定しない限り、順次で実行される。\n// stream userList.stream() .forEach(System.out::println); // name: John, age: 40 // name: Paul, age: 79 // name: George, age: 58 // name: Ringo, age: 81 parallelStream 並列で実行する場合は、並列のストリームを生成する必要がある。\n// parallelStream userList.parallelStream() .forEach(System.out::println); // name: George, age: 58 // name: Ringo, age: 81 // name: John, age: 40 // name: Paul, age: 79 絞り込み filter 与えられたラムダ式が true となる要素から構成された stream を返す。\n// 60歳未満のみ出力 userList.stream() .filter(u - u.getAge()  60) .forEach(System.out::println); // name: John, age: 40 // name: George, age: 58 加工 map 与えられたラムダ式で加工した結果から構成される stream を返す。\n// \"My name is XX\" の文字列に加工して出力 userList.stream() .map(u - \"My name is\" + u.getName()) .forEach(System.out::println); // My name isJohn // My name isPaul // My name isGeorge // My name isRingo スキップ skip 先頭から n 番目の要素を除いた stream を返す。\nuserList.stream() .skip(2) .forEach(System.out::println); // name: George, age: 58 // name: Ringo, age: 81 この例の場合、John と Paul の2人がスキップされている。\n要素数の制限 limit 指定した要素数の stream を返す。\nuserList.stream() .limit(2) .forEach(System.out::println); // name: John, age: 40 // name: Paul, age: 79 並べ替え sorted 指定したルールでソートした stream を返す。\n// 年齢の昇順 userList.stream() .sorted(Comparator.comparing(User::getAge)) .forEach(System.out::println); // name: John, age: 40 // name: George, age: 58 // name: Paul, age: 79 // name: Ringo, age: 81  // 年齢の降順 userList.stream() .sorted(Comparator.comparing(User::getAge).reversed()) .forEach(System.out::println); // name: Ringo, age: 81 // name: Paul, age: 79 // name: George, age: 58 // name: John, age: 40 条件判定 anyMatch // いずれかの要素が指定した条件を満たせば true boolean anyMatch = userList.stream() .anyMatch(u - u.getAge()  60); System.out.println(anyMatch); // true allMatch // 全ての要素が指定した条件を満たせば true boolean allMatch = userList.stream() .anyMatch(u - u.getAge()  60); System.out.println(allMatch); // false noneMatch // 全ての要素が指定した条件を満たさなければ true boolean noneMatch = userList.stream() .noneMatch(u - u.getName().equals(\"Pete\")); System.out.println(noneMatch); 先頭の要素を取得 findFirst Optional 型を返すので、orElse などが必要となる。\nUser user = userList.stream() .findFirst() .orElse(null); System.out.println(user); 集計 max // 年齢が最大のユーザ User maxAgeUser = userList.stream() .max(Comparator.comparing(User::getAge)) .orElse(null); System.out.println(maxAgeUser); // name: Ringo, age: 81 min // 年齢が最小のユーザ User minAgeUser = userList.stream() .min(Comparator.comparing(User::getAge)) .orElse(null); System.out.println(minAgeUser); // name: John, age: 40 count // 要素の個数 long count = userList.stream() .count(); System.out.println(count); // 4 average // 年齢の平均 double average = userList.stream() .mapToInt(User::getAge) .average() .orElse(0); System.out.println(average); // 64.5 sum // 年齢の合計 int sum = userList.stream() .mapToInt(User::getAge) .sum(); System.out.println(sum); // 258 値をまとめる reduce // 全員の名前をカンマ区切りで並べた文字列を取得 String result = userList.stream() .map(User::getName) .reduce((res, u) - res += \", \" + u) .orElse(\"\"); System.out.println(result); // John, Paul, George, Ringo ","wordCount":"1040","inLanguage":"en","datePublished":"2022-01-24T22:00:00+09:00","dateModified":"2022-01-24T22:00:00+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://0x1feb.github.io/posts/2022/01/24/java-stream-memo/"},"publisher":{"@type":"Organization","name":"0x1feb","logo":{"@type":"ImageObject","url":"https://0x1feb.github.io/favicon.ico"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://0x1feb.github.io/ accesskey=h title="0x1feb (Alt + H)">0x1feb</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://0x1feb.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://0x1feb.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://0x1feb.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://0x1feb.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://0x1feb.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://0x1feb.github.io/posts/>Posts</a></div><h1 class=post-title>Java の Stream メモ</h1><div class=post-meta><span title="2022-01-24 22:00:00 +0900 +0900">2022-01-24</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/0x1feb/0x1feb-blog/blob/main/content/posts/2022/01/25/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#stream-%e3%81%a8%e3%81%af aria-label="Stream とは">Stream とは</a></li><li><a href=#%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%82%af%e3%83%a9%e3%82%b9 aria-label=サンプルクラス>サンプルクラス</a><ul><li><a href=#user-%e3%82%af%e3%83%a9%e3%82%b9 aria-label="User クラス">User クラス</a></li><li><a href=#user-%e3%81%ae%e3%82%b3%e3%83%ac%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3 aria-label="User のコレクション">User のコレクション</a></li></ul></li><li><a href=#%e8%a6%81%e7%b4%a0%e3%82%92%e9%a0%86%e7%95%aa%e3%81%ab%e5%87%a6%e7%90%86 aria-label=要素を順番に処理>要素を順番に処理</a><ul><li><a href=#foreach aria-label=forEach>forEach</a></li></ul></li><li><a href=#%e9%a0%86%e6%ac%a1%e4%b8%a6%e5%88%97 aria-label=順次/並列>順次/並列</a><ul><li><a href=#stream aria-label=stream>stream</a></li><li><a href=#parallelstream aria-label=parallelStream>parallelStream</a></li></ul></li><li><a href=#%e7%b5%9e%e3%82%8a%e8%be%bc%e3%81%bf aria-label=絞り込み>絞り込み</a><ul><li><a href=#filter aria-label=filter>filter</a></li></ul></li><li><a href=#%e5%8a%a0%e5%b7%a5 aria-label=加工>加工</a><ul><li><a href=#map aria-label=map>map</a></li></ul></li><li><a href=#%e3%82%b9%e3%82%ad%e3%83%83%e3%83%97 aria-label=スキップ>スキップ</a><ul><li><a href=#skip aria-label=skip>skip</a></li></ul></li><li><a href=#%e8%a6%81%e7%b4%a0%e6%95%b0%e3%81%ae%e5%88%b6%e9%99%90 aria-label=要素数の制限>要素数の制限</a><ul><li><a href=#limit aria-label=limit>limit</a></li></ul></li><li><a href=#%e4%b8%a6%e3%81%b9%e6%9b%bf%e3%81%88 aria-label=並べ替え>並べ替え</a><ul><li><a href=#sorted aria-label=sorted>sorted</a></li></ul></li><li><a href=#%e6%9d%a1%e4%bb%b6%e5%88%a4%e5%ae%9a aria-label=条件判定>条件判定</a><ul><li><a href=#anymatch aria-label=anyMatch>anyMatch</a></li><li><a href=#allmatch aria-label=allMatch>allMatch</a></li><li><a href=#nonematch aria-label=noneMatch>noneMatch</a></li></ul></li><li><a href=#%e5%85%88%e9%a0%ad%e3%81%ae%e8%a6%81%e7%b4%a0%e3%82%92%e5%8f%96%e5%be%97 aria-label=先頭の要素を取得>先頭の要素を取得</a><ul><li><a href=#findfirst aria-label=findFirst>findFirst</a></li></ul></li><li><a href=#%e9%9b%86%e8%a8%88 aria-label=集計>集計</a><ul><li><a href=#max aria-label=max>max</a></li><li><a href=#min aria-label=min>min</a></li><li><a href=#count aria-label=count>count</a></li><li><a href=#average aria-label=average>average</a></li><li><a href=#sum aria-label=sum>sum</a></li></ul></li><li><a href=#%e5%80%a4%e3%82%92%e3%81%be%e3%81%a8%e3%82%81%e3%82%8b aria-label=値をまとめる>値をまとめる</a><ul><li><a href=#reduce aria-label=reduce>reduce</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=stream-とは>Stream とは<a hidden class=anchor aria-hidden=true href=#stream-とは>#</a></h2><p>Java 8 から追加され、コレクションに対する集約操作をサポートした機能を持つ。</p><p>中間操作と終端操作を組み合わせてパイプラインにできるため、for 文による繰り返し処理を簡潔に記述できる。</p><h2 id=サンプルクラス>サンプルクラス<a hidden class=anchor aria-hidden=true href=#サンプルクラス>#</a></h2><h3 id=user-クラス>User クラス<a hidden class=anchor aria-hidden=true href=#user-クラス>#</a></h3><p>年齢と名前の情報のみを持つ、以下のユーザクラスを用いる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>;</span>

    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> age<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> name<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setName</span><span style=color:#f92672>(</span>String name<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> name<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAge</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> age<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setAge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> age<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>age</span> <span style=color:#f92672>=</span> age<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;name: &#34;</span> <span style=color:#f92672>+</span> name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;, age: &#34;</span> <span style=color:#f92672>+</span> age<span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=user-のコレクション>User のコレクション<a hidden class=anchor aria-hidden=true href=#user-のコレクション>#</a></h3><p>コレクションは以下とする。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> userList <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;();</span>
userList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> User<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;John&#34;</span><span style=color:#f92672>,</span> 40<span style=color:#f92672>));</span>
userList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> User<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Paul&#34;</span><span style=color:#f92672>,</span> 79<span style=color:#f92672>));</span>
userList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> User<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;George&#34;</span><span style=color:#f92672>,</span> 58<span style=color:#f92672>));</span>
userList<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> User<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Ringo&#34;</span><span style=color:#f92672>,</span> 81<span style=color:#f92672>));</span>
</code></pre></div><h2 id=要素を順番に処理>要素を順番に処理<a hidden class=anchor aria-hidden=true href=#要素を順番に処理>#</a></h2><h3 id=foreach>forEach<a hidden class=anchor aria-hidden=true href=#foreach>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>u <span style=color:#f92672>-&gt;</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>u<span style=color:#f92672>));</span>
<span style=color:#75715e>// name: John, age: 40
</span><span style=color:#75715e>// name: Paul, age: 79
</span><span style=color:#75715e>// name: George, age: 58
</span><span style=color:#75715e>// name: Ringo, age: 81
</span><span style=color:#75715e></span>
<span style=color:#75715e>// 以下も同じ結果
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
</code></pre></div><p>ラムダ式を受け取るが、別のメソッドをそのまま呼び出す場合、メソッドのみを渡すこともできる。</p><h2 id=順次並列>順次/並列<a hidden class=anchor aria-hidden=true href=#順次並列>#</a></h2><h3 id=stream>stream<a hidden class=anchor aria-hidden=true href=#stream>#</a></h3><p>ストリームは明示的に並列を指定しない限り、順次で実行される。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// stream
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: John, age: 40
</span><span style=color:#75715e>// name: Paul, age: 79
</span><span style=color:#75715e>// name: George, age: 58
</span><span style=color:#75715e>// name: Ringo, age: 81
</span></code></pre></div><h3 id=parallelstream>parallelStream<a hidden class=anchor aria-hidden=true href=#parallelstream>#</a></h3><p>並列で実行する場合は、並列のストリームを生成する必要がある。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// parallelStream
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>parallelStream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: George, age: 58
</span><span style=color:#75715e>// name: Ringo, age: 81
</span><span style=color:#75715e>// name: John, age: 40
</span><span style=color:#75715e>// name: Paul, age: 79
</span></code></pre></div><h2 id=絞り込み>絞り込み<a hidden class=anchor aria-hidden=true href=#絞り込み>#</a></h2><h3 id=filter>filter<a hidden class=anchor aria-hidden=true href=#filter>#</a></h3><p>与えられたラムダ式が true となる要素から構成された stream を返す。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 60歳未満のみ出力
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>u <span style=color:#f92672>-&gt;</span> u<span style=color:#f92672>.</span><span style=color:#a6e22e>getAge</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 60<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: John, age: 40
</span><span style=color:#75715e>// name: George, age: 58
</span></code></pre></div><h2 id=加工>加工<a hidden class=anchor aria-hidden=true href=#加工>#</a></h2><h3 id=map>map<a hidden class=anchor aria-hidden=true href=#map>#</a></h3><p>与えられたラムダ式で加工した結果から構成される stream を返す。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// &#34;My name is XX&#34; の文字列に加工して出力
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>u <span style=color:#f92672>-&gt;</span> <span style=color:#e6db74>&#34;My name is&#34;</span> <span style=color:#f92672>+</span> u<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>())</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// My name isJohn
</span><span style=color:#75715e>// My name isPaul
</span><span style=color:#75715e>// My name isGeorge
</span><span style=color:#75715e>// My name isRingo
</span></code></pre></div><h2 id=スキップ>スキップ<a hidden class=anchor aria-hidden=true href=#スキップ>#</a></h2><h3 id=skip>skip<a hidden class=anchor aria-hidden=true href=#skip>#</a></h3><p>先頭から n 番目の要素を除いた stream を返す。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>skip</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: George, age: 58
</span><span style=color:#75715e>// name: Ringo, age: 81
</span></code></pre></div><p>この例の場合、John と Paul の2人がスキップされている。</p><h2 id=要素数の制限>要素数の制限<a hidden class=anchor aria-hidden=true href=#要素数の制限>#</a></h2><h3 id=limit>limit<a hidden class=anchor aria-hidden=true href=#limit>#</a></h3><p>指定した要素数の stream を返す。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>limit</span><span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: John, age: 40
</span><span style=color:#75715e>// name: Paul, age: 79
</span></code></pre></div><h2 id=並べ替え>並べ替え<a hidden class=anchor aria-hidden=true href=#並べ替え>#</a></h2><h3 id=sorted>sorted<a hidden class=anchor aria-hidden=true href=#sorted>#</a></h3><p>指定したルールでソートした stream を返す。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 年齢の昇順
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>sorted</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>.</span><span style=color:#a6e22e>comparing</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getAge<span style=color:#f92672>))</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: John, age: 40
</span><span style=color:#75715e>// name: George, age: 58
</span><span style=color:#75715e>// name: Paul, age: 79
</span><span style=color:#75715e>// name: Ringo, age: 81
</span><span style=color:#75715e></span>
<span style=color:#75715e>// 年齢の降順
</span><span style=color:#75715e></span>userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>sorted</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>.</span><span style=color:#a6e22e>comparing</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getAge<span style=color:#f92672>).</span><span style=color:#a6e22e>reversed</span><span style=color:#f92672>())</span>
        <span style=color:#f92672>.</span><span style=color:#a6e22e>forEach</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>::</span>println<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: Ringo, age: 81
</span><span style=color:#75715e>// name: Paul, age: 79
</span><span style=color:#75715e>// name: George, age: 58
</span><span style=color:#75715e>// name: John, age: 40
</span></code></pre></div><h2 id=条件判定>条件判定<a hidden class=anchor aria-hidden=true href=#条件判定>#</a></h2><h3 id=anymatch>anyMatch<a hidden class=anchor aria-hidden=true href=#anymatch>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// いずれかの要素が指定した条件を満たせば true
</span><span style=color:#75715e></span><span style=color:#66d9ef>boolean</span> anyMatch <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                           <span style=color:#f92672>.</span><span style=color:#a6e22e>anyMatch</span><span style=color:#f92672>(</span>u <span style=color:#f92672>-&gt;</span> u<span style=color:#f92672>.</span><span style=color:#a6e22e>getAge</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 60<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>anyMatch<span style=color:#f92672>);</span>
<span style=color:#75715e>// true
</span></code></pre></div><h3 id=allmatch>allMatch<a hidden class=anchor aria-hidden=true href=#allmatch>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 全ての要素が指定した条件を満たせば true
</span><span style=color:#75715e></span><span style=color:#66d9ef>boolean</span> allMatch <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                           <span style=color:#f92672>.</span><span style=color:#a6e22e>anyMatch</span><span style=color:#f92672>(</span>u <span style=color:#f92672>-&gt;</span> u<span style=color:#f92672>.</span><span style=color:#a6e22e>getAge</span><span style=color:#f92672>()</span> <span style=color:#f92672>&lt;</span> 60<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>allMatch<span style=color:#f92672>);</span>
<span style=color:#75715e>// false
</span></code></pre></div><h3 id=nonematch>noneMatch<a hidden class=anchor aria-hidden=true href=#nonematch>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 全ての要素が指定した条件を満たさなければ true
</span><span style=color:#75715e></span><span style=color:#66d9ef>boolean</span> noneMatch <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                           <span style=color:#f92672>.</span><span style=color:#a6e22e>noneMatch</span><span style=color:#f92672>(</span>u <span style=color:#f92672>-&gt;</span> u<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Pete&#34;</span><span style=color:#f92672>));</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>noneMatch<span style=color:#f92672>);</span>
</code></pre></div><h2 id=先頭の要素を取得>先頭の要素を取得<a hidden class=anchor aria-hidden=true href=#先頭の要素を取得>#</a></h2><h3 id=findfirst>findFirst<a hidden class=anchor aria-hidden=true href=#findfirst>#</a></h3><p>Optional 型を返すので、orElse などが必要となる。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>User user <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                    <span style=color:#f92672>.</span><span style=color:#a6e22e>findFirst</span><span style=color:#f92672>()</span>
                    <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>
</code></pre></div><h2 id=集計>集計<a hidden class=anchor aria-hidden=true href=#集計>#</a></h2><h3 id=max>max<a hidden class=anchor aria-hidden=true href=#max>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 年齢が最大のユーザ
</span><span style=color:#75715e></span>User maxAgeUser <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                          <span style=color:#f92672>.</span><span style=color:#a6e22e>max</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>.</span><span style=color:#a6e22e>comparing</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getAge<span style=color:#f92672>))</span>
                          <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>maxAgeUser<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: Ringo, age: 81
</span></code></pre></div><h3 id=min>min<a hidden class=anchor aria-hidden=true href=#min>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 年齢が最小のユーザ
</span><span style=color:#75715e></span>User minAgeUser <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                          <span style=color:#f92672>.</span><span style=color:#a6e22e>min</span><span style=color:#f92672>(</span>Comparator<span style=color:#f92672>.</span><span style=color:#a6e22e>comparing</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getAge<span style=color:#f92672>))</span>
                          <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span><span style=color:#66d9ef>null</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>minAgeUser<span style=color:#f92672>);</span>
<span style=color:#75715e>// name: John, age: 40
</span></code></pre></div><h3 id=count>count<a hidden class=anchor aria-hidden=true href=#count>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 要素の個数
</span><span style=color:#75715e></span><span style=color:#66d9ef>long</span> count <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                     <span style=color:#f92672>.</span><span style=color:#a6e22e>count</span><span style=color:#f92672>();</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>count<span style=color:#f92672>);</span>
<span style=color:#75715e>// 4
</span></code></pre></div><h3 id=average>average<a hidden class=anchor aria-hidden=true href=#average>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 年齢の平均
</span><span style=color:#75715e></span><span style=color:#66d9ef>double</span> average <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                     <span style=color:#f92672>.</span><span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getAge<span style=color:#f92672>)</span>
                     <span style=color:#f92672>.</span><span style=color:#a6e22e>average</span><span style=color:#f92672>()</span>
                     <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span>0<span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>average<span style=color:#f92672>);</span>
<span style=color:#75715e>// 64.5
</span></code></pre></div><h3 id=sum>sum<a hidden class=anchor aria-hidden=true href=#sum>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 年齢の合計
</span><span style=color:#75715e></span><span style=color:#66d9ef>int</span> sum <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                  <span style=color:#f92672>.</span><span style=color:#a6e22e>mapToInt</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getAge<span style=color:#f92672>)</span>
                  <span style=color:#f92672>.</span><span style=color:#a6e22e>sum</span><span style=color:#f92672>();</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>sum<span style=color:#f92672>);</span>
<span style=color:#75715e>// 258
</span></code></pre></div><h2 id=値をまとめる>値をまとめる<a hidden class=anchor aria-hidden=true href=#値をまとめる>#</a></h2><h3 id=reduce>reduce<a hidden class=anchor aria-hidden=true href=#reduce>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 全員の名前をカンマ区切りで並べた文字列を取得
</span><span style=color:#75715e></span>String result <span style=color:#f92672>=</span> userList<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>()</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>User<span style=color:#f92672>::</span>getName<span style=color:#f92672>)</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>reduce</span><span style=color:#f92672>((</span>res<span style=color:#f92672>,</span> u<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> res <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;, &#34;</span> <span style=color:#f92672>+</span> u<span style=color:#f92672>)</span>
                        <span style=color:#f92672>.</span><span style=color:#a6e22e>orElse</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>);</span>
System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>result<span style=color:#f92672>);</span>
<span style=color:#75715e>// John, Paul, George, Ringo
</span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://0x1feb.github.io/tags/java-8/>Java 8</a></li></ul><nav class=paginav><a class=prev href=https://0x1feb.github.io/posts/2022/01/27/combining-multi-elements-in-java-stream/><span class=title>« Prev Page</span><br><span>複数の要素を Stream でまとめる</span></a>
<a class=next href=https://0x1feb.github.io/posts/2022/01/21/hello-world/><span class=title>Next Page »</span><br><span>hello, world</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://0x1feb.github.io/>0x1feb</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu')
if(menu){menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script>document.querySelectorAll('pre > code').forEach((codeblock)=>{const container=codeblock.parentNode.parentNode;const copybutton=document.createElement('button');copybutton.classList.add('copy-code');copybutton.innerText='copy';function copyingDone(){copybutton.innerText='copied!';setTimeout(()=>{copybutton.innerText='copy';},2000);}
copybutton.addEventListener('click',(cb)=>{if('clipboard'in navigator){navigator.clipboard.writeText(codeblock.textContent);copyingDone();return;}
const range=document.createRange();range.selectNodeContents(codeblock);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);try{document.execCommand('copy');copyingDone();}catch(e){};selection.removeRange(range);});if(container.classList.contains("highlight")){container.appendChild(copybutton);}else if(container.parentNode.firstChild==container){}else if(codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"){codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);}else{codeblock.parentNode.appendChild(copybutton);}});</script></body></html>