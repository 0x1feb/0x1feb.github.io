<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JUnit 5 の動的テスト @ParameterizedTest を整理する | 0x1feb</title><meta name=keywords content="JUnit 5"><meta name=description content="概要 JUnit 5 の動的テストを整理する。 @ParameterizedTest @ValueSource @EnumSource @MethodSource @CsvSource @CsvFileSource @ArgumentsSource @ArgumentsSources 前提 JUnit 5 解説 @ParameterizedTest @ParameterizedTest は、単一のテストメソッドを複数の入力値またはパラメーターで実行できるようにす"><meta name=author content="Me"><link rel=canonical href=https://0x1feb.github.io/posts/2024/09/23/understanding-junit-5-parameterized-test-annotation/><link crossorigin=anonymous href=/assets/css/stylesheet.2c6f4dd559e084f6d8c4fe12fc03ca0874c557458b50f600bc5bb1a3789e8d49.css integrity="sha256-LG9N1VnghPbYxP4S/APKCHTFV0WLUPYAvFuxo3iejUk=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://0x1feb.github.io/img/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://0x1feb.github.io/img/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://0x1feb.github.io/img/favicon.svg><link rel=apple-touch-icon href=https://0x1feb.github.io/img/favicon.svg><link rel=mask-icon href=https://0x1feb.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="JUnit 5 の動的テスト @ParameterizedTest を整理する"><meta property="og:description" content="概要 JUnit 5 の動的テストを整理する。 @ParameterizedTest @ValueSource @EnumSource @MethodSource @CsvSource @CsvFileSource @ArgumentsSource @ArgumentsSources 前提 JUnit 5 解説 @ParameterizedTest @ParameterizedTest は、単一のテストメソッドを複数の入力値またはパラメーターで実行できるようにす"><meta property="og:type" content="article"><meta property="og:url" content="https://0x1feb.github.io/posts/2024/09/23/understanding-junit-5-parameterized-test-annotation/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-23T12:40:01+09:00"><meta property="article:modified_time" content="2024-09-23T12:40:01+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="JUnit 5 の動的テスト @ParameterizedTest を整理する"><meta name=twitter:description content="概要 JUnit 5 の動的テストを整理する。 @ParameterizedTest @ValueSource @EnumSource @MethodSource @CsvSource @CsvFileSource @ArgumentsSource @ArgumentsSources 前提 JUnit 5 解説 @ParameterizedTest @ParameterizedTest は、単一のテストメソッドを複数の入力値またはパラメーターで実行できるようにす"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://0x1feb.github.io/posts/"},{"@type":"ListItem","position":2,"name":"JUnit 5 の動的テスト @ParameterizedTest を整理する","item":"https://0x1feb.github.io/posts/2024/09/23/understanding-junit-5-parameterized-test-annotation/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JUnit 5 の動的テスト @ParameterizedTest を整理する","name":"JUnit 5 の動的テスト @ParameterizedTest を整理する","description":"概要 JUnit 5 の動的テストを整理する。 @ParameterizedTest @ValueSource @EnumSource @MethodSource @CsvSource @CsvFileSource @ArgumentsSource @ArgumentsSources 前提 JUnit 5 解説 @ParameterizedTest @ParameterizedTest は、単一のテストメソッドを複数の入力値またはパラメーターで実行できるようにす","keywords":["JUnit 5"],"articleBody":"概要 JUnit 5 の動的テストを整理する。 @ParameterizedTest @ValueSource @EnumSource @MethodSource @CsvSource @CsvFileSource @ArgumentsSource @ArgumentsSources 前提 JUnit 5 解説 @ParameterizedTest @ParameterizedTest は、単一のテストメソッドを複数の入力値またはパラメーターで実行できるようにするアノテーションである。\n以下のようなテストメソッドを定義している場合、@ParameterizedTest が役立つ。\n静的テスト @Test 内に異なるパラメータで同じアサーションを実行している。 パラメータが異なるだけの静的テスト @Test が複数ある。 例えば、偶数であるかを判定する isEven メソッドのテストを考える。\npublic boolean isEven(int x) { return x % 2 == 0; } いくつかの数でテストしたい場合、次のようなテストを作成したとする。\n@Test void testIsEven() { assertTrue(isEven(2)); // [passed] assertTrue(isEven(3)); // [failed] assertTrue(isEven(6)); } このテストは、2 つ目の assertTrue(isEven(3)); にて、本来はパラメータに 4 を指定するところ、誤って 3 を指定してしまった。そのため、2 つ目のアサーションで失敗するが、次のような問題点がある。\nどのアサーションで失敗したかが、ログを確認しなければわからない。 失敗した時点でテストが終了してしまうため、失敗した箇所を改善するまで、後続の assertTrue(isEven(6)); の結果がわからない。 パラメータの数だけテストメソッドを作成すると、上記の問題は発生しなくなる。\n@Test void testIsEven1() { assertTrue(isEven(2)); // [passed] } @Test void testIsEven2() { assertTrue(isEven(3)); // [failed] } @Test void testIsEven3() { assertTrue(isEven(6)); // [passed] } この形であれば、testIsEven2 が誤っていることがすぐにわかり、assertTrue(isEven(3)); が失敗しても、testIsEven3 で assertTrue(isEven(6)); の結果がわかる。\nしかし、この方針だと、パラメータの数だけ同じテストメソッドを作成しなければならない。また、テストメソッドの実装を変える場合、全てのテストメソッドを修正しなければならず、保守性や拡張性が悪い。\nこのような場合に @ParameterizedTest を使うと、1 つのテストメソッドで複数のパラメータをテストできる。\n@ParameterizedTest では、引数に渡すソースを設定するため、次のアノテーションを用いる。\n@ValueSource @EnumSource @CsvSource @CsvFileSource @MethodSource @ArgumentsSource @ArgumentsSources @ValueSource @ValueSource は、指定したリテラル値をテストメソッドの引数に直接提供する。\nテストメソッドは、@ValueSource に指定したリテラル値の数だけ実行される。\n@ValueSource で指定できるパラメータは次の通りである。\nbooleans (boolean[]) bytes (byte[]) chars (char[]) classes (Class\u003c?\u003e[]) doubles (double[]) floats (float[]) ints (int[]) longs (long[]) shorts (short[]) strings (String[]) 例えば、パラメータに int を渡したい場合、次のように @ValueSource(ints = {2, 3, 6}) を指定する。\nclass ExampleParameterizedTest { @ParameterizedTest @ValueSource(ints = {2, 3, 6}) void parameterizedTest(int argument) { assertEquals(0, argument % 2); } } ここでは ints = {2, 3, 6} を指定しており、この値は parameterizedTest メソッドの引数である argument に渡される。\n実行結果は次の通りである。\nExampleParameterizedTest.parameterizedTest: 3 total, 1 failed, 2 passed ExampleParameterizedTest parameterizedTest [1] 2 [passed] [2] 3 [failed] [3] 6 [passed] 指定した値の数だけ独立したテストが実行されていることがわかる。\n@EnumSource @EnumSource は、指定した enum の値をテストメソッドの引数に直接提供する。\nテストメソッドは、指定した enum の値の数だけ実行される。\n例えば、以下の Season を指定すると、SPRING, SUMMER, AUTUMN, WINTER の 4 つの値が引数に渡され、4 回分テストメソッドが実行される。\nenum Season { SPRING, SUMMER, AUTUMN, WINTER } テストに使う enum の値は、EnumSource.Mode を指定することで、フィルタできる。\nEXCLUDE 指定した値を除く。 ex. names = {\"SPRING\",\"SUMMER\"} を指定した場合、SPRING, SUMMER 以外 (AUTUMN, WINTER) が対象となる。 INCLUDE: 指定した値のみを含める。 ex. names = {\"SPRING\",\"SUMMER\"} を指定した場合、SPRING, SUMMER のみが対象となる。 MATCH_ALL: 指定したパターンの全てに一致する値のみを含める。 ex. names = {\"^S.+\", \".*R.*\"} を指定した場合、先頭が S かつどこかに R が含まれている値 (SPRING, SUMMER) が対象となる。 MATCH_ANY: 指定したパターンのいずれかに一致する値のみを含める。 ex. names = {\"^S.+\", \".*R.*\"} を指定した場合、先頭が S またはどこかに R が含まれている値 (SPRING, SUMMER, WINTER) が対象となる。 MATCH_NONE: 指定したパターンのいずれかにも一致しない値のみを含める。 ex. names = {\"^S.+\", \".*R.*\"} を指定した場合、先頭が S またはどこかに R が含まれている値以外 (AUTUMN) が対象となる。 まず、特にモードは指定せず、@EnumSource(Season.class) を設定する。\nclass ExampleParameterizedTest { @ParameterizedTest @EnumSource(Season.class) void parameterizedTestWithEnumSource1(Season season) { assertTrue(EnumSet.allOf(Season.class).contains(season)); } } 実行結果は次の通りである。Season の全ての値でテストメソッドが実行されている。\nExampleParameterizedTest.parameterizedTestWithEnumSource1: 4 total, 4 passed ExampleParameterizedTest parameterizedTestWithEnumSource1 [1] SPRING [passed] [2] SUMMER [passed] [3] AUTUMN [passed] [4] WINTER [passed] 次に、モードを指定する。指定した内容は、先述したモードの説明\nclass ExampleParameterizedTest { @ParameterizedTest @EnumSource(value = Season.class, mode = EnumSource.Mode.EXCLUDE, names = {\"SPRING\", \"SUMMER\"}) void parameterizedTestWithEnumSource2(Season season) { assertTrue(EnumSet.of(Season.AUTUMN, Season.WINTER).contains(season)); assertFalse(EnumSet.of(Season.SPRING, Season.SUMMER).contains(season)); } @ParameterizedTest @EnumSource(value = Season.class, mode = EnumSource.Mode.INCLUDE, names = {\"SPRING\", \"SUMMER\"}) void parameterizedTestWithEnumSource3(Season season) { assertTrue(EnumSet.of(Season.SPRING, Season.SUMMER).contains(season)); assertFalse(EnumSet.of(Season.AUTUMN, Season.WINTER).contains(season)); } @ParameterizedTest @EnumSource(value = Season.class, mode = EnumSource.Mode.MATCH_ALL, names = {\"^S.+\", \".*R.*\"}) void parameterizedTestWithEnumSource4(Season season) { assertTrue(EnumSet.of(Season.SPRING, Season.SUMMER).contains(season)); assertFalse(EnumSet.of(Season.AUTUMN, Season.WINTER).contains(season)); } @ParameterizedTest @EnumSource(value = Season.class, mode = EnumSource.Mode.MATCH_ANY, names = {\"^S.+\", \".*R.*\"}) void parameterizedTestWithEnumSource5(Season season) { assertTrue(EnumSet.of(Season.SPRING, Season.SUMMER, Season.WINTER).contains(season)); assertFalse(EnumSet.of(Season.AUTUMN).contains(season)); } @ParameterizedTest @EnumSource(value = Season.class, mode = EnumSource.Mode.MATCH_NONE, names = {\"^S.+\", \".*R.*\"}) void parameterizedTestWithEnumSource6(Season season) { assertTrue(EnumSet.of(Season.AUTUMN).contains(season)); assertFalse(EnumSet.of(Season.SPRING, Season.SUMMER, Season.WINTER).contains(season)); } } 実行結果は次の通りである。フィルタ通りの値を使ったテストが実行されていることがわかる。\nExampleParameterizedTest: 10 total, 10 passed ExampleParameterizedTest parameterizedTestWithEnumSource2 [1] AUTUMN [passed] [2] WINTER [passed] parameterizedTestWithEnumSource3 [1] SPRING [passed] [2] SUMMER [passed] parameterizedTestWithEnumSource4 [1] SPRING [passed] [2] SUMMER [passed] parameterizedTestWithEnumSource5 [1] SPRING [passed] [2] SUMMER [passed] [3] WINTER [passed] parameterizedTestWithEnumSource6 [1] AUTUMN [passed] @MethodSource @MethodSource は、指定したファクトリメソッド経由でテストメソッドの引数に値を提供する。\nテストメソッドは、指定したファクトリメソッドが返すストリームの値の数だけ実行される。\nテストメソッドの引数とファクトリメソッドの戻り値は、次のような対応となる。\n@ParameterizedTest method Factory method void test(int) static int[] factory() void test(int) static IntStream factory() void test(String) static String[] factory() void test(String) static List factory() void test(String) static Stream factory() void test(String, String) static String[][] factory() void test(String, int) static Object[][] factory() void test(String, int) static Stream factory() void test(String, int) static Stream factory() void test(int[]) static int[][] factory() void test(int[]) static Stream factory() void test(int[][]) static Stream factory() void test(Object[][]) static Stream factory() 例えば、Stream を返す stringFactoryMethod を使う場合、@MethodSource(\"stringFactoryMethod\") を付与する。なお、外部のファクトリメソッドを参照する場合は、メソッドの完全修飾名 (パッケージも含めた形) を指定する。\nclass ExampleParameterizedTest { static Stream\u003cString\u003e stringFactoryMethod() { return Stream.of(\"morning\", \"evening\"); } @ParameterizedTest @MethodSource(\"stringFactoryMethod\") void parameterizedTestWithMethodSource(String argument) { assertNotEquals(\"afternoon\", argument); } } 実行結果は次の通りである。指定したファクトリメソッドのストリームが提供する値の数だけテストが実行されていることがわかる。\nExampleParameterizedTest.parameterizedTestWithMethodSource: 2 total, 2 passed ExampleParameterizedTest parameterizedTestWithMethodSource [1] morning [passed] [2] evening [passed] 複数のテストでパラメータの値が共通している場合や、パラメータの値を動的に生成したい場合に役立つ。\n@CsvSource @CsvSource は、指定した CSV レコード形式の値をテストメソッドの引数に直接提供する。外部の CSV ファイルを読み込んで提供したい場合は、後述する @CsvFileSource を使用する。\nテストメソッドは、@CsvSource に指定した CSV レコードの行数だけ実行される。\n@CsvSource に指定できるオプションは、次の通りである。\nvalue (String[]) 引数のソースとして使用する CSV レコードを指定する。 textBlock (String) 引数のソースとして使用する CSV レコードを 1 つのテキスト・ブロックとして設定する。 テキストブロックは Java SE 15 以降で使用できる。 行頭が # の行はコメント行として扱われ、無視される。 テキストブロックの区切り記号 \"\"\" は、入力の最終行の末尾か、次の行に、入力の残りの部分と垂直に並ぶように配置することが推奨される。 @CsvSource と @CsvFileSource の両方に共通するオプションは、次の通りである。\nuseHeadersInDisplayName (boolean) 最初の CSV レコードをカラムのヘッダ名として扱うかどうかを指定する。 デフォルトでは false が指定されている。 quoteCharacter (char) 引用符の文字を指定する。 デフォルトでは ' が指定されている。 delimiter (char) 列の区切り文字を指定する。 デフォルトは , が区切り文字として指定されている。 delimiterString (String) 列の区切り文字列を指定する。 emptyValue (String) 値が空だった場合の文字列を指定する。 デフォルトは \"\" が空文字として指定されている。 nullValues (String[]) null として解釈する文字列を指定する。 デフォルトでは {} (指定なし) が指定されている。 引用符で囲まれていない空の値は、nullValues の設定に関わらず null に変換される。 maxCharsPerColumn (int) カラム毎の値の最大幅を指定する。 デフォルトでは 4096 が設定されている。 ignoreLeadingAndTrailingWhitespace (boolean) 引用符に囲まれていない前後のスペースを削除するかどうか指定する。 デフォルトでは true が設定されている。 まず、value のみを指定した例を試す。この例では、以下の CSV レコードを設定している。\nカラム 1: 数値 1 カラム 2: 数値 2 カラム 3: 数値 1 と数値 2 の合計数値 class ExampleParameterizedTest { @ParameterizedTest @CsvSource({ \"1, 1, 2\", \"1, 2, 3\", \"-2, 2, 0\" }) void parameterizedTestWithCsvSource1(int num1, int num2, int expectedSum) { assertEquals(expectedSum, num1 + num2); } } 実行結果は次の通りである。CSV レコードの行数だけテストが実行されていることがわかる。\nExampleParameterizedTest.parameterizedTestWithCsvSource1: 3 total, 3 passed ExampleParameterizedTest parameterizedTestWithCsvSource1 [1] 1, 1, 2 [passed] [2] 1, 2, 3 [passed] [3] -2, 2, 0 [passed] 次に、オプションをいくつか指定し、デフォルト形式以外の CSV レコードを処理してみる。\nこの例では、以下の CSV を処理するよう設定している。\nuseHeadersInDisplayName = true 1 行目はヘッダ行として扱う。 quoteCharacter = '\"' \" を引用符とする。 delimiter = '|' | を区切り文字とする。 emptyValue = \"empty\" 値が空のときは文字列 \"empty\" として処理する。 textBlock = \"\"\" ... 先頭行にヘッダ行を記載している。 引用符に \" 、区切り文字に | を使用している。 最後の行は # で始まるため、コメント行として無視される。 CSV 内の空文字は、文字列 \"empty\" として処理される。そのため、CSV の length 列の値が 0 のとき、length を 5 に更新してからアサーションを実行している。\nclass ExampleParameterizedTest { @ParameterizedTest @CsvSource(useHeadersInDisplayName = true, quoteCharacter = '\"', delimiter = '|', emptyValue = \"empty\", textBlock = \"\"\" message|length \"Hello, world!\"|13 \"garbage in, garbage out\"|23 \"\"|0 #| \"\"\" ) void parameterizedTestWithCsvSource2(String message, int length) { if (length == 0) { // if message is emptyValue, then message becomes \"empty\" length = 5; } assertEquals(length, message.length()); } } 実行結果は次の通りである。最初と最後の行を除いた CSV レコードの行数だけテストが実行されていることがわかる。\nExampleParameterizedTest.parameterizedTestWithCsvSource2: 3 total, 3 passed ExampleParameterizedTest parameterizedTestWithCsvSource2 [1] message = Hello, world!, length = 13 [passed] [2] message = garbage in, garbage out, length = 23 [passed] [3] message = empty, length = 0 [passed] @CsvFileSource @CsvFileSource は、指定した外部の CSV ファイルを読み込み、テストメソッドの引数に提供する。\nテストメソッドは、@CsvFileSource で読み込んだ CSV の行数だけ実行される。\n@CsvFileSource に指定できるオプションは、基本的に @CsvFile と同じである。ここでは、@CsvFileSource 固有のオプションのみを説明する。\nresources (String[]) 引数のソースとして使用する CSV ファイルのクラスパスを指定する。 files (String[]) 引数のソースとして使用する CSV ファイルのパスを指定する。 encoding (String) CSV ファイルを読み込むときに使用するエンコーディングを指定する。 デフォルトは \"UTF-8\" が指定されている。 lineSeparator (String) CSV ファイルを読み込むときに使用する行区切り文字を指定する。 デフォルトは \"\\n\" が指定されている。 numLinesToSkip (int) CSV ファイルを読み込むときにスキップする行数を指定する。 デフォルトは 0 が指定されている。 resources で読み込む CSV ファイルは、src/test/resources 配下に作成する。このとき、実行するテストクラスのパッケージと合わせる必要がある。例えば、テストクラスが src/test/java/org/example/ExampleParameterizedTest.java のとき、CSV ファイルは resources 配下の同一パスである src/test/resource/org/example/ 配下に配置する。\n今回は、src/test/method/ExampleParameterizedTest.java にテストクラスを作成しているため、テストデータの CSV ファイルを src/test/resources/method/exampleTestData.csv に作成する。\nCSV ファイルの中身は以下の通りとする。\n1,1,2 1,2,3 -2,2,0 このファイルを読み込んでテストする場合、次のようになる。(パスの指定方法以外はどちらも同じ。)\nclass ExampleParameterizedTest { @ParameterizedTest @CsvFileSource(resources = \"exampleTestData.csv\") void parameterizedTestWithCsvSource3(int num1, int num2, int expectedSum) { assertEquals(expectedSum, num1 + num2); } @ParameterizedTest @CsvFileSource(files = \"src/test/resources/method/exampleTestData.csv\") void parameterizedTestWithCsvSource4(int num1, int num2, int expectedSum) { assertEquals(expectedSum, num1 + num2); } } parameterizedTestWithCsvSource3 を実行した結果は次の通りである。\nExampleParameterizedTest.parameterizedTestWithCsvSource3: 3 total, 3 passed ExampleParameterizedTest parameterizedTestWithCsvSource3 [1] 1, 1, 2 [passed] [2] 1, 2, 3 [passed] [3] -2, 2, 0 [passed] CSV ファイルを読み込んでテストしていることがわかる。\n@ArgumentsSource @ArgumentsSource は、再利用可能な ArgumentsProvider クラスをテストメソッドの引数に提供する。ArgumentsProvider の実装は、トップレベルまたは static なネストクラスとして定義しなければならない。\nテストメソッドは、@ArgumentsSource で指定したクラスの provideArguments メソッドの結果を引数として受け取る。\n例えば、ArgumentsProvider インタフェースを実装した ExampleArgumentsProvider クラスを作成する。\npublic class ExampleArgumentsProvider implements ArgumentsProvider { @Override public Stream\u003c? extends Arguments\u003e provideArguments(ExtensionContext extensionContext) { return Stream.of(\"spring\", \"summer\").map(Arguments::of); } } このクラスで実装する provideArguments メソッドの戻り値が、@ParameterizedTest のテストメソッドに提供される。\n@ParameterizedTest を付与したテストメソッドでは、@ArgumentsSource(ExampleArgumentsProvider.class) のようにプロバイダを指定する。\nclass ExampleParameterizedTest { @ParameterizedTest @ArgumentsSource(ExampleArgumentsProvider.class) void parameterizedTestWithArgumentsSource(String arguments) { assertEquals(6, arguments.length()); } } parameterizedTestWithArgumentsSource を実行した結果は次の通りである。\nExampleParameterizedTest.parameterizedTestWithArgumentsSource: 2 total, 2 passed ExampleParameterizedTest parameterizedTestWithArgumentsSource [1] spring [passed] [2] summer [passed] ExampleArgumentsProvider の provideArguments が提供されていることがわかる。\n@ArgumentsSources @ArgumentsSource を複数指定するためのアノテーションである。\n例えば、ArgumentsProvider インタフェースの実装として、以下の 2 クラスを作成する。(今回は static なネストクラスとして作成した。)\nFirstArgumentsProvider SecondArgumentsProvider このプロバイダの両方を使う場合、@ArgumentsSources の引数に @ArgumentsSource の配列を渡す。\nclass ExampleParameterizedTest { @ParameterizedTest @ArgumentsSources({ @ArgumentsSource(FirstArgumentsProvider.class), @ArgumentsSource(SecondArgumentsProvider.class) }) void parameterizedTestWithArgumentsSources(String arguments) { assertEquals(6, arguments.length()); } static class FirstArgumentsProvider implements ArgumentsProvider { @Override public Stream\u003c? extends Arguments\u003e provideArguments(ExtensionContext extensionContext) throws Exception { return Stream.of(\"spring\", \"summer\").map(Arguments::of); } } static class SecondArgumentsProvider implements ArgumentsProvider { @Override public Stream\u003c? extends Arguments\u003e provideArguments(ExtensionContext extensionContext) throws Exception { return Stream.of(\"autumn\", \"winter\").map(Arguments::of); } } } parameterizedTestWithArgumentsSources を実行した結果は次の通りである。\nExampleParameterizedTest.parameterizedTestWithArgumentsSources: 2 total, 2 passed ExampleParameterizedTest parameterizedTestWithArgumentsSources [1] spring [passed] [2] summer [passed] [3] autumn [passed] [4] winter [passed] FirstArgumentsProvider と SecondArgumentsProvider の provideArguments が提供されていることがわかる。\n参考 ParameterizedTest (JUnit 5.11.0 API) ValueSource (JUnit 5.11.0 API) EnumSource (JUnit 5.11.0 API) MethodSource (JUnit 5.11.0 API) CsvSource (JUnit 5.11.0 API) CsvFileSource (JUnit 5.11.0 API) ArgumentsSource (JUnit 5.11.0 API) ArgumentsSources (JUnit 5.11.0 API) ","wordCount":"4938","inLanguage":"en","datePublished":"2024-09-23T12:40:01+09:00","dateModified":"2024-09-23T12:40:01+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://0x1feb.github.io/posts/2024/09/23/understanding-junit-5-parameterized-test-annotation/"},"publisher":{"@type":"Organization","name":"0x1feb","logo":{"@type":"ImageObject","url":"https://0x1feb.github.io/img/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://0x1feb.github.io/ accesskey=h title="0x1feb (Alt + H)">0x1feb</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://0x1feb.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://0x1feb.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://0x1feb.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://0x1feb.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://0x1feb.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://0x1feb.github.io/posts/>Posts</a></div><h1 class=post-title>JUnit 5 の動的テスト @ParameterizedTest を整理する</h1><div class=post-meta><span title='2024-09-23 12:40:01 +0900 +0900'>2024-09-23</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/0x1feb/0x1feb-blog/blob/main/content/posts/2024/09/23/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%a6%82%e8%a6%81 aria-label=概要>概要</a></li><li><a href=#%e5%89%8d%e6%8f%90 aria-label=前提>前提</a></li><li><a href=#%e8%a7%a3%e8%aa%ac aria-label=解説>解説</a><ul><li><a href=#parameterizedtest aria-label=@ParameterizedTest><code>@ParameterizedTest</code></a></li><li><a href=#valuesource aria-label=@ValueSource><code>@ValueSource</code></a></li><li><a href=#enumsource aria-label=@EnumSource><code>@EnumSource</code></a></li><li><a href=#methodsource aria-label=@MethodSource><code>@MethodSource</code></a></li><li><a href=#csvsource aria-label=@CsvSource><code>@CsvSource</code></a></li><li><a href=#csvfilesource aria-label=@CsvFileSource><code>@CsvFileSource</code></a></li><li><a href=#argumentssource aria-label=@ArgumentsSource><code>@ArgumentsSource</code></a></li><li><a href=#argumentssources aria-label=@ArgumentsSources><code>@ArgumentsSources</code></a></li></ul></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div class=post-content><h2 id=概要>概要<a hidden class=anchor aria-hidden=true href=#概要>#</a></h2><ul><li>JUnit 5 の動的テストを整理する。<ul><li><code>@ParameterizedTest</code><ul><li><code>@ValueSource</code></li><li><code>@EnumSource</code></li><li><code>@MethodSource</code></li><li><code>@CsvSource</code></li><li><code>@CsvFileSource</code></li><li><code>@ArgumentsSource</code></li><li><code>@ArgumentsSources</code></li></ul></li></ul></li></ul><h2 id=前提>前提<a hidden class=anchor aria-hidden=true href=#前提>#</a></h2><ul><li>JUnit 5</li></ul><h2 id=解説>解説<a hidden class=anchor aria-hidden=true href=#解説>#</a></h2><h3 id=parameterizedtest><code>@ParameterizedTest</code><a hidden class=anchor aria-hidden=true href=#parameterizedtest>#</a></h3><p><code>@ParameterizedTest</code> は、単一のテストメソッドを複数の入力値またはパラメーターで実行できるようにするアノテーションである。</p><p>以下のようなテストメソッドを定義している場合、<code>@ParameterizedTest</code> が役立つ。</p><ul><li>静的テスト <code>@Test</code> 内に異なるパラメータで同じアサーションを実行している。</li><li>パラメータが異なるだけの静的テスト <code>@Test</code> が複数ある。</li></ul><p>例えば、偶数であるかを判定する <code>isEven</code> メソッドのテストを考える。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isEven</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> x<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> x <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>いくつかの数でテストしたい場合、次のようなテストを作成したとする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIsEven</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  assertTrue<span style=color:#f92672>(</span>isEven<span style=color:#f92672>(</span><span style=color:#ae81ff>2</span><span style=color:#f92672>));</span> <span style=color:#75715e>// [passed]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  assertTrue<span style=color:#f92672>(</span>isEven<span style=color:#f92672>(</span><span style=color:#ae81ff>3</span><span style=color:#f92672>));</span> <span style=color:#75715e>// [failed]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  assertTrue<span style=color:#f92672>(</span>isEven<span style=color:#f92672>(</span><span style=color:#ae81ff>6</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>このテストは、2 つ目の <code>assertTrue(isEven(3));</code> にて、本来はパラメータに <code>4</code> を指定するところ、誤って <code>3</code> を指定してしまった。そのため、2 つ目のアサーションで失敗するが、次のような問題点がある。</p><ul><li>どのアサーションで失敗したかが、ログを確認しなければわからない。</li><li>失敗した時点でテストが終了してしまうため、失敗した箇所を改善するまで、後続の <code>assertTrue(isEven(6));</code> の結果がわからない。</li></ul><p>パラメータの数だけテストメソッドを作成すると、上記の問題は発生しなくなる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIsEven1</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  assertTrue<span style=color:#f92672>(</span>isEven<span style=color:#f92672>(</span><span style=color:#ae81ff>2</span><span style=color:#f92672>));</span> <span style=color:#75715e>// [passed]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIsEven2</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  assertTrue<span style=color:#f92672>(</span>isEven<span style=color:#f92672>(</span><span style=color:#ae81ff>3</span><span style=color:#f92672>));</span> <span style=color:#75715e>// [failed]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testIsEven3</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  assertTrue<span style=color:#f92672>(</span>isEven<span style=color:#f92672>(</span><span style=color:#ae81ff>6</span><span style=color:#f92672>));</span> <span style=color:#75715e>// [passed]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>この形であれば、<code>testIsEven2</code> が誤っていることがすぐにわかり、<code>assertTrue(isEven(3));</code> が失敗しても、<code>testIsEven3</code> で <code>assertTrue(isEven(6));</code> の結果がわかる。</p><p>しかし、この方針だと、パラメータの数だけ同じテストメソッドを作成しなければならない。また、テストメソッドの実装を変える場合、全てのテストメソッドを修正しなければならず、保守性や拡張性が悪い。</p><p>このような場合に <code>@ParameterizedTest</code> を使うと、1 つのテストメソッドで複数のパラメータをテストできる。</p><p><code>@ParameterizedTest</code> では、引数に渡すソースを設定するため、次のアノテーションを用いる。</p><ul><li><code>@ValueSource</code></li><li><code>@EnumSource</code></li><li><code>@CsvSource</code></li><li><code>@CsvFileSource</code></li><li><code>@MethodSource</code></li><li><code>@ArgumentsSource</code></li><li><code>@ArgumentsSources</code></li></ul><h3 id=valuesource><code>@ValueSource</code><a hidden class=anchor aria-hidden=true href=#valuesource>#</a></h3><p><code>@ValueSource</code> は、指定したリテラル値をテストメソッドの引数に直接提供する。</p><p>テストメソッドは、<code>@ValueSource</code> に指定したリテラル値の数だけ実行される。</p><p><code>@ValueSource</code> で指定できるパラメータは次の通りである。</p><ul><li>booleans (<code>boolean[]</code>)</li><li>bytes (<code>byte[]</code>)</li><li>chars (<code>char[]</code>)</li><li>classes (<code>Class&lt;?>[]</code>)</li><li>doubles (<code>double[]</code>)</li><li>floats (<code>float[]</code>)</li><li>ints (<code>int[]</code>)</li><li>longs (<code>long[]</code>)</li><li>shorts (<code>short[]</code>)</li><li>strings (<code>String[]</code>)</li></ul><p>例えば、パラメータに <code>int</code> を渡したい場合、次のように <code>@ValueSource(ints = {2, 3, 6})</code> を指定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ValueSource</span><span style=color:#f92672>(</span>ints <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#ae81ff>2</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>,</span> <span style=color:#ae81ff>6</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTest</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> argument<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span> argument <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>ここでは <code>ints = {2, 3, 6}</code> を指定しており、この値は <code>parameterizedTest</code> メソッドの引数である <code>argument</code> に渡される。</p><p>実行結果は次の通りである。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTest: 3 total, 1 failed, 2 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTest
</span></span><span style=display:flex><span>    [1] 2 [passed]
</span></span><span style=display:flex><span>    [2] 3 [failed]
</span></span><span style=display:flex><span>    [3] 6 [passed]
</span></span></code></pre></div><p>指定した値の数だけ独立したテストが実行されていることがわかる。</p><h3 id=enumsource><code>@EnumSource</code><a hidden class=anchor aria-hidden=true href=#enumsource>#</a></h3><p><code>@EnumSource</code> は、指定した <code>enum</code> の値をテストメソッドの引数に直接提供する。</p><p>テストメソッドは、指定した <code>enum</code> の値の数だけ実行される。</p><p>例えば、以下の <code>Season</code> を指定すると、<code>SPRING</code>, <code>SUMMER</code>, <code>AUTUMN</code>, <code>WINTER</code> の 4 つの値が引数に渡され、4 回分テストメソッドが実行される。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>enum</span> Season <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    SPRING<span style=color:#f92672>,</span> SUMMER<span style=color:#f92672>,</span> AUTUMN<span style=color:#f92672>,</span> WINTER
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>テストに使う <code>enum</code> の値は、<a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/EnumSource.Mode.html>EnumSource.Mode</a> を指定することで、フィルタできる。</p><ul><li><code>EXCLUDE</code><ul><li>指定した値を除く。</li><li>ex. <code>names = {"SPRING","SUMMER"}</code> を指定した場合、<code>SPRING</code>, <code>SUMMER</code> 以外 (<code>AUTUMN</code>, <code>WINTER</code>) が対象となる。</li></ul></li><li><code>INCLUDE</code>:<ul><li>指定した値のみを含める。</li><li>ex. <code>names = {"SPRING","SUMMER"}</code> を指定した場合、<code>SPRING</code>, <code>SUMMER</code> のみが対象となる。</li></ul></li><li><code>MATCH_ALL</code>:<ul><li>指定したパターンの全てに一致する値のみを含める。</li><li>ex. <code>names = {"^S.+", ".*R.*"}</code> を指定した場合、先頭が <code>S</code> かつどこかに <code>R</code> が含まれている値 (<code>SPRING</code>, <code>SUMMER</code>) が対象となる。</li></ul></li><li><code>MATCH_ANY</code>:<ul><li>指定したパターンのいずれかに一致する値のみを含める。</li><li>ex. <code>names = {"^S.+", ".*R.*"}</code> を指定した場合、先頭が <code>S</code> またはどこかに <code>R</code> が含まれている値 (<code>SPRING</code>, <code>SUMMER</code>, <code>WINTER</code>) が対象となる。</li></ul></li><li><code>MATCH_NONE</code>:<ul><li>指定したパターンのいずれかにも一致しない値のみを含める。</li><li>ex. <code>names = {"^S.+", ".*R.*"}</code> を指定した場合、先頭が <code>S</code> またはどこかに <code>R</code> が含まれている値<strong>以外</strong> (<code>AUTUMN</code>) が対象となる。</li></ul></li></ul><p>まず、特にモードは指定せず、<code>@EnumSource(Season.class)</code> を設定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EnumSource</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithEnumSource1</span><span style=color:#f92672>(</span>Season season<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertTrue<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>allOf</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>実行結果は次の通りである。<code>Season</code> の全ての値でテストメソッドが実行されている。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithEnumSource1: 4 total, 4 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithEnumSource1
</span></span><span style=display:flex><span>    [1] SPRING [passed]
</span></span><span style=display:flex><span>    [2] SUMMER [passed]
</span></span><span style=display:flex><span>    [3] AUTUMN [passed]
</span></span><span style=display:flex><span>    [4] WINTER [passed]
</span></span></code></pre></div><p>次に、モードを指定する。指定した内容は、先述したモードの説明</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EnumSource</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> mode <span style=color:#f92672>=</span> EnumSource<span style=color:#f92672>.</span><span style=color:#a6e22e>Mode</span><span style=color:#f92672>.</span><span style=color:#a6e22e>EXCLUDE</span><span style=color:#f92672>,</span> names <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;SPRING&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;SUMMER&#34;</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithEnumSource2</span><span style=color:#f92672>(</span>Season season<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertTrue<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTUMN</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>WINTER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        assertFalse<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SPRING</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SUMMER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EnumSource</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> mode <span style=color:#f92672>=</span> EnumSource<span style=color:#f92672>.</span><span style=color:#a6e22e>Mode</span><span style=color:#f92672>.</span><span style=color:#a6e22e>INCLUDE</span><span style=color:#f92672>,</span> names <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;SPRING&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;SUMMER&#34;</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithEnumSource3</span><span style=color:#f92672>(</span>Season season<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertTrue<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SPRING</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SUMMER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        assertFalse<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTUMN</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>WINTER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EnumSource</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> mode <span style=color:#f92672>=</span> EnumSource<span style=color:#f92672>.</span><span style=color:#a6e22e>Mode</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MATCH_ALL</span><span style=color:#f92672>,</span> names <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;^S.+&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;.*R.*&#34;</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithEnumSource4</span><span style=color:#f92672>(</span>Season season<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertTrue<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SPRING</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SUMMER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        assertFalse<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTUMN</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>WINTER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EnumSource</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> mode <span style=color:#f92672>=</span> EnumSource<span style=color:#f92672>.</span><span style=color:#a6e22e>Mode</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MATCH_ANY</span><span style=color:#f92672>,</span> names <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;^S.+&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;.*R.*&#34;</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithEnumSource5</span><span style=color:#f92672>(</span>Season season<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertTrue<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SPRING</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SUMMER</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>WINTER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        assertFalse<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTUMN</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@EnumSource</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> mode <span style=color:#f92672>=</span> EnumSource<span style=color:#f92672>.</span><span style=color:#a6e22e>Mode</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MATCH_NONE</span><span style=color:#f92672>,</span> names <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;^S.+&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;.*R.*&#34;</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithEnumSource6</span><span style=color:#f92672>(</span>Season season<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertTrue<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>AUTUMN</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>        assertFalse<span style=color:#f92672>(</span>EnumSet<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span>Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SPRING</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>SUMMER</span><span style=color:#f92672>,</span> Season<span style=color:#f92672>.</span><span style=color:#a6e22e>WINTER</span><span style=color:#f92672>).</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>season<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>実行結果は次の通りである。フィルタ通りの値を使ったテストが実行されていることがわかる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest: 10 total, 10 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithEnumSource2
</span></span><span style=display:flex><span>    [1] AUTUMN [passed]
</span></span><span style=display:flex><span>    [2] WINTER [passed]
</span></span><span style=display:flex><span>  parameterizedTestWithEnumSource3
</span></span><span style=display:flex><span>    [1] SPRING [passed]
</span></span><span style=display:flex><span>    [2] SUMMER [passed]
</span></span><span style=display:flex><span>  parameterizedTestWithEnumSource4
</span></span><span style=display:flex><span>    [1] SPRING [passed]
</span></span><span style=display:flex><span>    [2] SUMMER [passed]
</span></span><span style=display:flex><span>  parameterizedTestWithEnumSource5
</span></span><span style=display:flex><span>    [1] SPRING [passed]
</span></span><span style=display:flex><span>    [2] SUMMER [passed]
</span></span><span style=display:flex><span>    [3] WINTER [passed]
</span></span><span style=display:flex><span>  parameterizedTestWithEnumSource6
</span></span><span style=display:flex><span>    [1] AUTUMN [passed]
</span></span></code></pre></div><h3 id=methodsource><code>@MethodSource</code><a hidden class=anchor aria-hidden=true href=#methodsource>#</a></h3><p><code>@MethodSource</code> は、指定したファクトリメソッド経由でテストメソッドの引数に値を提供する。</p><p>テストメソッドは、指定したファクトリメソッドが返すストリームの値の数だけ実行される。</p><p>テストメソッドの引数とファクトリメソッドの戻り値は、次のような対応となる。</p><table><thead><tr><th><code>@ParameterizedTest method</code></th><th><code>Factory method</code></th></tr></thead><tbody><tr><td><code>void test(int)</code></td><td><code>static int[] factory()</code></td></tr><tr><td><code>void test(int)</code></td><td><code>static IntStream factory()</code></td></tr><tr><td><code>void test(String)</code></td><td><code>static String[] factory()</code></td></tr><tr><td><code>void test(String)</code></td><td><code>static List&lt;String> factory()</code></td></tr><tr><td><code>void test(String)</code></td><td><code>static Stream&lt;String> factory()</code></td></tr><tr><td><code>void test(String, String)</code></td><td><code>static String[][] factory()</code></td></tr><tr><td><code>void test(String, int)</code></td><td><code>static Object[][] factory()</code></td></tr><tr><td><code>void test(String, int)</code></td><td><code>static Stream&lt;Object[]> factory()</code></td></tr><tr><td><code>void test(String, int)</code></td><td><code>static Stream&lt;Arguments> factory()</code></td></tr><tr><td><code>void test(int[])</code></td><td><code>static int[][] factory()</code></td></tr><tr><td><code>void test(int[])</code></td><td><code>static Stream&lt;int[]> factory()</code></td></tr><tr><td><code>void test(int[][])</code></td><td><code>static Stream&lt;int[][]> factory()</code></td></tr><tr><td><code>void test(Object[][])</code></td><td><code>static Stream&lt;Object[][]> factory()</code></td></tr></tbody></table><p>例えば、<code>Stream&lt;String></code> を返す <code>stringFactoryMethod</code> を使う場合、<code>@MethodSource("stringFactoryMethod")</code> を付与する。なお、外部のファクトリメソッドを参照する場合は、メソッドの完全修飾名 (パッケージも含めた形) を指定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> Stream<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>stringFactoryMethod</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Stream<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;morning&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;evening&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@MethodSource</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;stringFactoryMethod&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithMethodSource</span><span style=color:#f92672>(</span>String argument<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertNotEquals<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;afternoon&#34;</span><span style=color:#f92672>,</span> argument<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>実行結果は次の通りである。指定したファクトリメソッドのストリームが提供する値の数だけテストが実行されていることがわかる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithMethodSource: 2 total, 2 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithMethodSource
</span></span><span style=display:flex><span>    [1] morning [passed]
</span></span><span style=display:flex><span>    [2] evening [passed]
</span></span></code></pre></div><p>複数のテストでパラメータの値が共通している場合や、パラメータの値を動的に生成したい場合に役立つ。</p><h3 id=csvsource><code>@CsvSource</code><a hidden class=anchor aria-hidden=true href=#csvsource>#</a></h3><p><code>@CsvSource</code> は、指定した CSV レコード形式の値をテストメソッドの引数に直接提供する。外部の CSV ファイルを読み込んで提供したい場合は、後述する <code>@CsvFileSource</code> を使用する。</p><p>テストメソッドは、<code>@CsvSource</code> に指定した CSV レコードの行数だけ実行される。</p><p><code>@CsvSource</code> に指定できるオプションは、次の通りである。</p><ul><li>value (<code>String[]</code>)<ul><li>引数のソースとして使用する CSV レコードを指定する。</li></ul></li><li>textBlock (<code>String</code>)<ul><li>引数のソースとして使用する CSV レコードを 1 つのテキスト・ブロックとして設定する。</li><li>テキストブロックは Java SE 15 以降で使用できる。</li><li>行頭が <code>#</code> の行はコメント行として扱われ、無視される。</li><li>テキストブロックの区切り記号 <code>"""</code> は、入力の最終行の末尾か、次の行に、入力の残りの部分と垂直に並ぶように配置することが推奨される。</li></ul></li></ul><p><code>@CsvSource</code> と <code>@CsvFileSource</code> の両方に共通するオプションは、次の通りである。</p><ul><li>useHeadersInDisplayName (<code>boolean</code>)<ul><li>最初の CSV レコードをカラムのヘッダ名として扱うかどうかを指定する。</li><li>デフォルトでは <code>false</code> が指定されている。</li></ul></li><li>quoteCharacter (<code>char</code>)<ul><li>引用符の文字を指定する。</li><li>デフォルトでは <code>'</code> が指定されている。</li></ul></li><li>delimiter (<code>char</code>)<ul><li>列の区切り文字を指定する。</li><li>デフォルトは <code>,</code> が区切り文字として指定されている。</li></ul></li><li>delimiterString (<code>String</code>)<ul><li>列の区切り文字列を指定する。</li></ul></li><li>emptyValue (<code>String</code>)<ul><li>値が空だった場合の文字列を指定する。</li><li>デフォルトは <code>""</code> が空文字として指定されている。</li></ul></li><li>nullValues (<code>String[]</code>)<ul><li><code>null</code> として解釈する文字列を指定する。</li><li>デフォルトでは <code>{}</code> (指定なし) が指定されている。</li><li>引用符で囲まれていない空の値は、nullValues の設定に関わらず <code>null</code> に変換される。</li></ul></li><li>maxCharsPerColumn (<code>int</code>)<ul><li>カラム毎の値の最大幅を指定する。</li><li>デフォルトでは <code>4096</code> が設定されている。</li></ul></li><li>ignoreLeadingAndTrailingWhitespace (<code>boolean</code>)<ul><li>引用符に囲まれていない前後のスペースを削除するかどうか指定する。</li><li>デフォルトでは <code>true</code> が設定されている。</li></ul></li></ul><p>まず、value のみを指定した例を試す。この例では、以下の CSV レコードを設定している。</p><ul><li>カラム 1: 数値 1</li><li>カラム 2: 数値 2</li><li>カラム 3: 数値 1 と数値 2 の合計数値</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CsvSource</span><span style=color:#f92672>({</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1, 1, 2&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1, 2, 3&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;-2, 2, 0&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithCsvSource1</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> num1<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> num2<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> expectedSum<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span>expectedSum<span style=color:#f92672>,</span> num1 <span style=color:#f92672>+</span> num2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>実行結果は次の通りである。CSV レコードの行数だけテストが実行されていることがわかる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithCsvSource1: 3 total, 3 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithCsvSource1
</span></span><span style=display:flex><span>    [1] 1, 1, 2 [passed]
</span></span><span style=display:flex><span>    [2] 1, 2, 3 [passed]
</span></span><span style=display:flex><span>    [3] -2, 2, 0 [passed]
</span></span></code></pre></div><p>次に、オプションをいくつか指定し、デフォルト形式以外の CSV レコードを処理してみる。</p><p>この例では、以下の CSV を処理するよう設定している。</p><ul><li><code>useHeadersInDisplayName = true</code><ul><li>1 行目はヘッダ行として扱う。</li></ul></li><li><code>quoteCharacter = '"'</code><ul><li><code>"</code> を引用符とする。</li></ul></li><li><code>delimiter = '|'</code><ul><li><code>|</code> を区切り文字とする。</li></ul></li><li><code>emptyValue = "empty"</code><ul><li>値が空のときは文字列 <code>"empty"</code> として処理する。</li></ul></li><li><code>textBlock = """ ...</code><ul><li>先頭行にヘッダ行を記載している。</li><li>引用符に <code>"</code> 、区切り文字に <code>|</code> を使用している。</li><li>最後の行は <code>#</code> で始まるため、コメント行として無視される。</li></ul></li></ul><p>CSV 内の空文字は、文字列 <code>"empty"</code> として処理される。そのため、CSV の length 列の値が <code>0</code> のとき、<code>length</code> を <code>5</code> に更新してからアサーションを実行している。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CsvSource</span><span style=color:#f92672>(</span>useHeadersInDisplayName <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            quoteCharacter <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#34;&#39;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            delimiter <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;|&#39;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            emptyValue <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;empty&#34;</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>            textBlock <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    message|length
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;</span>Hello<span style=color:#f92672>,</span> world<span style=color:#f92672>!</span><span style=color:#e6db74>&#34;|13
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;</span>garbage in<span style=color:#f92672>,</span> garbage out<span style=color:#e6db74>&#34;|23
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;&#34;|0
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    #|
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithCsvSource2</span><span style=color:#f92672>(</span>String message<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> length<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>length <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// if message is emptyValue, then message becomes &#34;empty&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            length <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span>length<span style=color:#f92672>,</span> message<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>実行結果は次の通りである。最初と最後の行を除いた CSV レコードの行数だけテストが実行されていることがわかる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithCsvSource2: 3 total, 3 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithCsvSource2
</span></span><span style=display:flex><span>    [1] message = Hello, world!, length = 13 [passed]
</span></span><span style=display:flex><span>    [2] message = garbage in, garbage out, length = 23 [passed]
</span></span><span style=display:flex><span>    [3] message = empty, length = 0 [passed]
</span></span></code></pre></div><h3 id=csvfilesource><code>@CsvFileSource</code><a hidden class=anchor aria-hidden=true href=#csvfilesource>#</a></h3><p><code>@CsvFileSource</code> は、指定した外部の CSV ファイルを読み込み、テストメソッドの引数に提供する。</p><p>テストメソッドは、<code>@CsvFileSource</code> で読み込んだ CSV の行数だけ実行される。</p><p><code>@CsvFileSource</code> に指定できるオプションは、基本的に <code>@CsvFile</code> と同じである。ここでは、<code>@CsvFileSource</code> 固有のオプションのみを説明する。</p><ul><li>resources (<code>String[]</code>)<ul><li>引数のソースとして使用する CSV ファイルのクラスパスを指定する。</li></ul></li><li>files (<code>String[]</code>)<ul><li>引数のソースとして使用する CSV ファイルのパスを指定する。</li></ul></li><li>encoding (<code>String</code>)<ul><li>CSV ファイルを読み込むときに使用するエンコーディングを指定する。</li><li>デフォルトは <code>"UTF-8"</code> が指定されている。</li></ul></li><li>lineSeparator (<code>String</code>)<ul><li>CSV ファイルを読み込むときに使用する行区切り文字を指定する。</li><li>デフォルトは <code>"\n"</code> が指定されている。</li></ul></li><li>numLinesToSkip (<code>int</code>)<ul><li>CSV ファイルを読み込むときにスキップする行数を指定する。</li><li>デフォルトは <code>0</code> が指定されている。</li></ul></li></ul><p><code>resources</code> で読み込む CSV ファイルは、<code>src/test/resources</code> 配下に作成する。このとき、実行するテストクラスのパッケージと合わせる必要がある。例えば、テストクラスが <code>src/test/java/org/example/ExampleParameterizedTest.java</code> のとき、CSV ファイルは <code>resources</code> 配下の同一パスである <code>src/test/resource/org/example/</code> 配下に配置する。</p><p>今回は、<code>src/test/method/ExampleParameterizedTest.java</code> にテストクラスを作成しているため、テストデータの CSV ファイルを <code>src/test/resources/method/exampleTestData.csv</code> に作成する。</p><p>CSV ファイルの中身は以下の通りとする。</p><pre tabindex=0><code class=language-csv data-lang=csv>1,1,2
1,2,3
-2,2,0
</code></pre><p>このファイルを読み込んでテストする場合、次のようになる。(パスの指定方法以外はどちらも同じ。)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CsvFileSource</span><span style=color:#f92672>(</span>resources <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;exampleTestData.csv&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithCsvSource3</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> num1<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> num2<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> expectedSum<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span>expectedSum<span style=color:#f92672>,</span> num1 <span style=color:#f92672>+</span> num2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CsvFileSource</span><span style=color:#f92672>(</span>files <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;src/test/resources/method/exampleTestData.csv&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithCsvSource4</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> num1<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> num2<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> expectedSum<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span>expectedSum<span style=color:#f92672>,</span> num1 <span style=color:#f92672>+</span> num2<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>parameterizedTestWithCsvSource3</code> を実行した結果は次の通りである。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithCsvSource3: 3 total, 3 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithCsvSource3
</span></span><span style=display:flex><span>    [1] 1, 1, 2 [passed]
</span></span><span style=display:flex><span>    [2] 1, 2, 3 [passed]
</span></span><span style=display:flex><span>    [3] -2, 2, 0 [passed]
</span></span></code></pre></div><p>CSV ファイルを読み込んでテストしていることがわかる。</p><h3 id=argumentssource><code>@ArgumentsSource</code><a hidden class=anchor aria-hidden=true href=#argumentssource>#</a></h3><p><code>@ArgumentsSource</code> は、再利用可能な <code>ArgumentsProvider</code> クラスをテストメソッドの引数に提供する。<code>ArgumentsProvider</code> の実装は、トップレベルまたは static なネストクラスとして定義しなければならない。</p><p>テストメソッドは、<code>@ArgumentsSource</code> で指定したクラスの <code>provideArguments</code> メソッドの結果を引数として受け取る。</p><p>例えば、<code>ArgumentsProvider</code> インタフェースを実装した <code>ExampleArgumentsProvider</code> クラスを作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleArgumentsProvider</span> <span style=color:#66d9ef>implements</span> ArgumentsProvider <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Stream<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> Arguments<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>provideArguments</span><span style=color:#f92672>(</span>ExtensionContext extensionContext<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Stream<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;spring&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;summer&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Arguments<span style=color:#f92672>::</span>of<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>このクラスで実装する <code>provideArguments</code> メソッドの戻り値が、<code>@ParameterizedTest</code> のテストメソッドに提供される。</p><p><code>@ParameterizedTest</code> を付与したテストメソッドでは、<code>@ArgumentsSource(ExampleArgumentsProvider.class)</code> のようにプロバイダを指定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ArgumentsSource</span><span style=color:#f92672>(</span>ExampleArgumentsProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithArgumentsSource</span><span style=color:#f92672>(</span>String arguments<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> arguments<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>parameterizedTestWithArgumentsSource</code> を実行した結果は次の通りである。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithArgumentsSource: 2 total, 2 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithArgumentsSource
</span></span><span style=display:flex><span>    [1] spring [passed]
</span></span><span style=display:flex><span>    [2] summer [passed]
</span></span></code></pre></div><p><code>ExampleArgumentsProvider</code> の <code>provideArguments</code> が提供されていることがわかる。</p><h3 id=argumentssources><code>@ArgumentsSources</code><a hidden class=anchor aria-hidden=true href=#argumentssources>#</a></h3><p><code>@ArgumentsSource</code> を複数指定するためのアノテーションである。</p><p>例えば、<code>ArgumentsProvider</code> インタフェースの実装として、以下の 2 クラスを作成する。(今回は static なネストクラスとして作成した。)</p><ul><li><code>FirstArgumentsProvider</code></li><li><code>SecondArgumentsProvider</code></li></ul><p>このプロバイダの両方を使う場合、<code>@ArgumentsSources</code> の引数に <code>@ArgumentsSource</code> の配列を渡す。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleParameterizedTest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ParameterizedTest</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ArgumentsSources</span><span style=color:#f92672>({</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@ArgumentsSource</span><span style=color:#f92672>(</span>FirstArgumentsProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>@ArgumentsSource</span><span style=color:#f92672>(</span>SecondArgumentsProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>})</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>parameterizedTestWithArgumentsSources</span><span style=color:#f92672>(</span>String arguments<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        assertEquals<span style=color:#f92672>(</span><span style=color:#ae81ff>6</span><span style=color:#f92672>,</span> arguments<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FirstArgumentsProvider</span> <span style=color:#66d9ef>implements</span> ArgumentsProvider <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> Stream<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> Arguments<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>provideArguments</span><span style=color:#f92672>(</span>ExtensionContext extensionContext<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Stream<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;spring&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;summer&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Arguments<span style=color:#f92672>::</span>of<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SecondArgumentsProvider</span> <span style=color:#66d9ef>implements</span> ArgumentsProvider <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> Stream<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> Arguments<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>provideArguments</span><span style=color:#f92672>(</span>ExtensionContext extensionContext<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Stream<span style=color:#f92672>.</span><span style=color:#a6e22e>of</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;autumn&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;winter&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Arguments<span style=color:#f92672>::</span>of<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>parameterizedTestWithArgumentsSources</code> を実行した結果は次の通りである。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ExampleParameterizedTest.parameterizedTestWithArgumentsSources: 2 total, 2 passed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ExampleParameterizedTest
</span></span><span style=display:flex><span>  parameterizedTestWithArgumentsSources
</span></span><span style=display:flex><span>    [1] spring [passed]
</span></span><span style=display:flex><span>    [2] summer [passed]
</span></span><span style=display:flex><span>    [3] autumn [passed]
</span></span><span style=display:flex><span>    [4] winter [passed]
</span></span></code></pre></div><p><code>FirstArgumentsProvider</code> と <code>SecondArgumentsProvider</code> の <code>provideArguments</code> が提供されていることがわかる。</p><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/ParameterizedTest.html>ParameterizedTest (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/ValueSource.html>ValueSource (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/EnumSource.html>EnumSource (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/MethodSource.html>MethodSource (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/CsvSource.html>CsvSource (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/CsvFileSource.html>CsvFileSource (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/ArgumentsSource.html>ArgumentsSource (JUnit 5.11.0 API)</a></li><li><a href=https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/ArgumentsSources.html>ArgumentsSources (JUnit 5.11.0 API)</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://0x1feb.github.io/tags/junit-5/>JUnit 5</a></li></ul><nav class=paginav><a class=next href=https://0x1feb.github.io/posts/2024/09/14/manipulating-windows-services-with-powershell/><span class=title>Next »</span><br><span>Windows のサービスを PowerShell のコマンドで操作する</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://0x1feb.github.io/>0x1feb</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>