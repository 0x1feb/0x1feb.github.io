<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする | 0x1feb</title>
<meta name=keywords content="Ubuntu"><meta name=description content="概要

Ubuntu に SoftEther VPN Server をインストールする。

前提

Ubuntu 22.04.4 LTS
SoftEther VPN Server (Ver 4.43, Build 9799, beta)

手順
SoftEther VPN Server のダウンロード
SoftEther ダウンロード センターより、以下を選択する。

ダウンロードするソフトウェア: SoftEther VPN (Freeware)
コンポーネント: SoftEther VPN Server
プラットフォーム: Linux
CPU: Intel x64 / AMD64 (64bit)

ダウンロード可能なファイルが表示されたら、最新の URL をコピーする。"><meta name=author content="Me"><link rel=canonical href=https://0x1feb.github.io/posts/2024/03/21/installing-softether-vpn-server-on-ubuntu-22.04.4-lts/><link crossorigin=anonymous href=/assets/css/stylesheet.b3ff0bec3e5556004dd0e01fc7c0f07f4616050eefb6b26a3ffc832384a626a7.css integrity="sha256-s/8L7D5VVgBN0OAfx8Dwf0YWBQ7vtrJqP/yDI4SmJqc=" rel="preload stylesheet" as=style><link rel=icon href=https://0x1feb.github.io/img/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://0x1feb.github.io/img/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://0x1feb.github.io/img/favicon.svg><link rel=apple-touch-icon href=https://0x1feb.github.io/img/favicon.svg><link rel=mask-icon href=https://0x1feb.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://0x1feb.github.io/posts/2024/03/21/installing-softether-vpn-server-on-ubuntu-22.04.4-lts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://0x1feb.github.io/posts/2024/03/21/installing-softether-vpn-server-on-ubuntu-22.04.4-lts/"><meta property="og:site_name" content="0x1feb"><meta property="og:title" content="Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする"><meta property="og:description" content="概要 Ubuntu に SoftEther VPN Server をインストールする。 前提 Ubuntu 22.04.4 LTS SoftEther VPN Server (Ver 4.43, Build 9799, beta) 手順 SoftEther VPN Server のダウンロード SoftEther ダウンロード センターより、以下を選択する。
ダウンロードするソフトウェア: SoftEther VPN (Freeware) コンポーネント: SoftEther VPN Server プラットフォーム: Linux CPU: Intel x64 / AMD64 (64bit) ダウンロード可能なファイルが表示されたら、最新の URL をコピーする。"><meta property="og:locale" content="ja"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-21T22:54:38+09:00"><meta property="article:modified_time" content="2024-03-21T22:54:38+09:00"><meta property="article:tag" content="Ubuntu"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする"><meta name=twitter:description content="概要

Ubuntu に SoftEther VPN Server をインストールする。

前提

Ubuntu 22.04.4 LTS
SoftEther VPN Server (Ver 4.43, Build 9799, beta)

手順
SoftEther VPN Server のダウンロード
SoftEther ダウンロード センターより、以下を選択する。

ダウンロードするソフトウェア: SoftEther VPN (Freeware)
コンポーネント: SoftEther VPN Server
プラットフォーム: Linux
CPU: Intel x64 / AMD64 (64bit)

ダウンロード可能なファイルが表示されたら、最新の URL をコピーする。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://0x1feb.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする","item":"https://0x1feb.github.io/posts/2024/03/21/installing-softether-vpn-server-on-ubuntu-22.04.4-lts/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする","name":"Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする","description":"概要 Ubuntu に SoftEther VPN Server をインストールする。 前提 Ubuntu 22.04.4 LTS SoftEther VPN Server (Ver 4.43, Build 9799, beta) 手順 SoftEther VPN Server のダウンロード SoftEther ダウンロード センターより、以下を選択する。\nダウンロードするソフトウェア: SoftEther VPN (Freeware) コンポーネント: SoftEther VPN Server プラットフォーム: Linux CPU: Intel x64 / AMD64 (64bit) ダウンロード可能なファイルが表示されたら、最新の URL をコピーする。\n","keywords":["Ubuntu"],"articleBody":"概要 Ubuntu に SoftEther VPN Server をインストールする。 前提 Ubuntu 22.04.4 LTS SoftEther VPN Server (Ver 4.43, Build 9799, beta) 手順 SoftEther VPN Server のダウンロード SoftEther ダウンロード センターより、以下を選択する。\nダウンロードするソフトウェア: SoftEther VPN (Freeware) コンポーネント: SoftEther VPN Server プラットフォーム: Linux CPU: Intel x64 / AMD64 (64bit) ダウンロード可能なファイルが表示されたら、最新の URL をコピーする。\n適当な作業用のディレクトリを作成し、以下コマンドを実行する。\n$ wget https://jp.softether-download.com/files/softether/v4.43-9799-beta-2023.08.31-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz --2024-03-21 23:01:57-- https://jp.softether-download.com/files/softether/v4.43-9799-beta-2023.08.31-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz Resolving jp.softether-download.com (jp.softether-download.com)... 130.158.75.49 Connecting to jp.softether-download.com (jp.softether-download.com)|130.158.75.49|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 8398576 (8.0M) [application/x-gzip] Saving to: ‘softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz’ softether-vpnserver-v4.43-979 100%[=================================================\u003e] 8.01M 9.25MB/s in 0.9s 2024-03-21 23:01:58 (9.25 MB/s) - ‘softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz’ saved [8398576/8398576] ダウンロードしたパッケージファイルを展開する。\n$ tar xzvf softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz vpnserver/ vpnserver/Makefile vpnserver/.install.sh vpnserver/ReadMeFirst_License.txt vpnserver/Authors.txt vpnserver/ReadMeFirst_Important_Notices_ja.txt vpnserver/ReadMeFirst_Important_Notices_en.txt vpnserver/ReadMeFirst_Important_Notices_cn.txt vpnserver/code/ vpnserver/code/vpnserver.a vpnserver/code/vpncmd.a vpnserver/lib/ vpnserver/lib/libcharset.a vpnserver/lib/libcrypto.a vpnserver/lib/libedit.a vpnserver/lib/libiconv.a vpnserver/lib/libintelaes.a vpnserver/lib/libncurses.a vpnserver/lib/libssl.a vpnserver/lib/libz.a vpnserver/lib/License.txt vpnserver/hamcore.se2 必要なソフトウェアやライブラリのインストール 実行可能ファイルを生成するために必要なソフトウェアやライブラリをインストールする。\nsudo apt install build-essential -y 実行可能ファイルの生成 展開したディレクトリを開き、make を実行する。\n$ cd softether $ make ... The preparation of SoftEther VPN Server is completed ! ... make[1]: Leaving directory '/home/hiro/tmp/vpnserver' The preparation of SoftEther VPN Server is completed ! が表示されたらたぶん問題ない。\nVPN Server の配置 /usr/local/vpnserver に移動する。\ncd .. sudo mv vpnserver /usr/local cd /usr/local/ root 権限のみで読み書きできるように設定する。\nsudo chmod -R 600 vpnserver sudo chmod 700 vpnserver/vpncmd sudo chmod 700 vpnserver/vpnserver sudo chown -R root:root vpnserver 動作チェック make 実行時にもチェックはされているが、再度チェックしたい場合は vpncmd より check を実行する。\n$ sudo vpnserver/vpncmd vpncmd command - SoftEther VPN Command Line Management Utility SoftEther VPN Command Line Management Utility (vpncmd command) Version 4.43 Build 9799 (English) Compiled 2023/08/31 10:50:49 by buildsan at crosswin with OpenSSL 3.0.9 Copyright (c) 2012-2023 SoftEther VPN Project. All Rights Reserved. By using vpncmd program, the following can be achieved. 1. Management of VPN Server or VPN Bridge 2. Management of VPN Client 3. Use of VPN Tools (certificate creation and Network Traffic Speed Test Tool) Select 1, 2 or 3: 3 VPN Tools has been launched. By inputting HELP, you can view a list of the commands that can be used. VPN Tools\u003echeck Check command - Check whether SoftEther VPN Operation is Possible --------------------------------------------------- SoftEther VPN Operation Environment Check Tool Copyright (c) SoftEther VPN Project. All Rights Reserved. If this operation environment check tool is run on a system and that system passes, it is most likely that SoftEther VPN software can operate on that system. This check may take a while. Please wait... Checking 'Kernel System'... Pass Checking 'Memory Operation System'... Pass Checking 'ANSI / Unicode string processing system'... Pass Checking 'File system'... Pass Checking 'Thread processing system'... Pass Checking 'Network system'... Pass All checks passed. It is most likely that SoftEther VPN Server / Bridge can operate normally on this system. The command completed successfully. VPN Tools\u003eexit サービスの登録 任意のエディタで、サービス呼び出しスクリプトを作成する。\nsudo vi /opt/vpnserver.sh #!/bin/sh # chkconfig: 2345 99 01 # description: SoftEther VPN Server DAEMON=/usr/local/vpnserver/vpnserver LOCK=/var/lock/subsys/vpnserver test -x $DAEMON || exit 0 case \"$1\" in start) $DAEMON start touch $LOCK ;; stop) $DAEMON stop rm $LOCK ;; restart) $DAEMON stop sleep 3 $DAEMON start ;; *) echo \"Usage: $0 {start|stop|restart}\" exit 1 esac exit 0 スクリプトの権限を変更する。\nsudo chmod 755 /opt/vpnserver.sh sudo chown root:root /opt/vpnserver.sh 任意のエディタで /etc/systemd/system/vpnserver.service を作成する。\nsudo vi /etc/systemd/system/vpnserver.service [Unit] Description = vpnserver daemon [Service] ExecStart = /opt/vpnserver.sh start ExecStop = /opt/vpnserver.sh stop ExecReload = /opt/vpnserver.sh restart Restart = always Type = forking [Install] WantedBy = multi-user.target サービスをリロードする。\nsudo systemctl daemon-reload vpnserver サービスを有効化する。\n$ sudo systemctl enable vpnserver.service Created symlink /etc/systemd/system/multi-user.target.wants/vpnserver.service → /etc/systemd/system/vpnserver.service. サービスの開始・停止 # 開始 sudo systemctl start vpnserver # 終了 sudo systemctl stop vpnserver # 再起動 sudo systemctl restart vpnserver 参考 7.3 Linux へのインストールと初期設定 - SoftEther VPN プロジェクト ","wordCount":"1131","inLanguage":"en","datePublished":"2024-03-21T22:54:38+09:00","dateModified":"2024-03-21T22:54:38+09:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://0x1feb.github.io/posts/2024/03/21/installing-softether-vpn-server-on-ubuntu-22.04.4-lts/"},"publisher":{"@type":"Organization","name":"0x1feb","logo":{"@type":"ImageObject","url":"https://0x1feb.github.io/img/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://0x1feb.github.io/ accesskey=h title="0x1feb (Alt + H)">0x1feb</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://0x1feb.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://0x1feb.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://0x1feb.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://0x1feb.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://0x1feb.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://0x1feb.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Ubuntu 22.04.4 LTS に SoftEther VPN Server をインストールする</h1><div class=post-meta><span title='2024-03-21 22:54:38 +0900 +0900'>2024-03-21</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/0x1feb/0x1feb-blog/blob/main/content/posts/2024/03/21/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e6%a6%82%e8%a6%81 aria-label=概要>概要</a></li><li><a href=#%e5%89%8d%e6%8f%90 aria-label=前提>前提</a></li><li><a href=#%e6%89%8b%e9%a0%86 aria-label=手順>手順</a><ul><li><a href=#softether-vpn-server-%e3%81%ae%e3%83%80%e3%82%a6%e3%83%b3%e3%83%ad%e3%83%bc%e3%83%89 aria-label="SoftEther VPN Server のダウンロード">SoftEther VPN Server のダウンロード</a></li><li><a href=#%e5%bf%85%e8%a6%81%e3%81%aa%e3%82%bd%e3%83%95%e3%83%88%e3%82%a6%e3%82%a7%e3%82%a2%e3%82%84%e3%83%a9%e3%82%a4%e3%83%96%e3%83%a9%e3%83%aa%e3%81%ae%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab aria-label=必要なソフトウェアやライブラリのインストール>必要なソフトウェアやライブラリのインストール</a></li><li><a href=#%e5%ae%9f%e8%a1%8c%e5%8f%af%e8%83%bd%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%81%ae%e7%94%9f%e6%88%90 aria-label=実行可能ファイルの生成>実行可能ファイルの生成</a></li><li><a href=#vpn-server-%e3%81%ae%e9%85%8d%e7%bd%ae aria-label="VPN Server の配置">VPN Server の配置</a></li><li><a href=#%e5%8b%95%e4%bd%9c%e3%83%81%e3%82%a7%e3%83%83%e3%82%af aria-label=動作チェック>動作チェック</a></li><li><a href=#%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%81%ae%e7%99%bb%e9%8c%b2 aria-label=サービスの登録>サービスの登録</a></li><li><a href=#%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%81%ae%e9%96%8b%e5%a7%8b%e5%81%9c%e6%ad%a2 aria-label=サービスの開始・停止>サービスの開始・停止</a></li></ul></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div class=post-content><h2 id=概要>概要<a hidden class=anchor aria-hidden=true href=#概要>#</a></h2><ul><li>Ubuntu に SoftEther VPN Server をインストールする。</li></ul><h2 id=前提>前提<a hidden class=anchor aria-hidden=true href=#前提>#</a></h2><ul><li>Ubuntu 22.04.4 LTS</li><li>SoftEther VPN Server (Ver 4.43, Build 9799, beta)</li></ul><h2 id=手順>手順<a hidden class=anchor aria-hidden=true href=#手順>#</a></h2><h3 id=softether-vpn-server-のダウンロード>SoftEther VPN Server のダウンロード<a hidden class=anchor aria-hidden=true href=#softether-vpn-server-のダウンロード>#</a></h3><p><a href="https://www.softether-download.com/ja.aspx?product=softether">SoftEther ダウンロード センター</a>より、以下を選択する。</p><ul><li>ダウンロードするソフトウェア: SoftEther VPN (Freeware)</li><li>コンポーネント: SoftEther VPN Server</li><li>プラットフォーム: Linux</li><li>CPU: Intel x64 / AMD64 (64bit)</li></ul><p>ダウンロード可能なファイルが表示されたら、最新の URL をコピーする。</p><p>適当な作業用のディレクトリを作成し、以下コマンドを実行する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ wget https://jp.softether-download.com/files/softether/v4.43-9799-beta-2023.08.31-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz
</span></span><span style=display:flex><span>--2024-03-21 23:01:57--  https://jp.softether-download.com/files/softether/v4.43-9799-beta-2023.08.31-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz
</span></span><span style=display:flex><span>Resolving jp.softether-download.com <span style=color:#f92672>(</span>jp.softether-download.com<span style=color:#f92672>)</span>... 130.158.75.49
</span></span><span style=display:flex><span>Connecting to jp.softether-download.com <span style=color:#f92672>(</span>jp.softether-download.com<span style=color:#f92672>)</span>|130.158.75.49|:443... connected.
</span></span><span style=display:flex><span>HTTP request sent, awaiting response... <span style=color:#ae81ff>200</span> OK
</span></span><span style=display:flex><span>Length: <span style=color:#ae81ff>8398576</span> <span style=color:#f92672>(</span>8.0M<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>application/x-gzip<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Saving to: ‘softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz’
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>softether-vpnserver-v4.43-979 100%<span style=color:#f92672>[=================================================</span>&gt;<span style=color:#f92672>]</span>   8.01M  9.25MB/s    in 0.9s
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2024-03-21 23:01:58 <span style=color:#f92672>(</span>9.25 MB/s<span style=color:#f92672>)</span> - ‘softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz’ saved <span style=color:#f92672>[</span>8398576/8398576<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>ダウンロードしたパッケージファイルを展開する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ tar xzvf softether-vpnserver-v4.43-9799-beta-2023.08.31-linux-x64-64bit.tar.gz
</span></span><span style=display:flex><span>vpnserver/
</span></span><span style=display:flex><span>vpnserver/Makefile
</span></span><span style=display:flex><span>vpnserver/.install.sh
</span></span><span style=display:flex><span>vpnserver/ReadMeFirst_License.txt
</span></span><span style=display:flex><span>vpnserver/Authors.txt
</span></span><span style=display:flex><span>vpnserver/ReadMeFirst_Important_Notices_ja.txt
</span></span><span style=display:flex><span>vpnserver/ReadMeFirst_Important_Notices_en.txt
</span></span><span style=display:flex><span>vpnserver/ReadMeFirst_Important_Notices_cn.txt
</span></span><span style=display:flex><span>vpnserver/code/
</span></span><span style=display:flex><span>vpnserver/code/vpnserver.a
</span></span><span style=display:flex><span>vpnserver/code/vpncmd.a
</span></span><span style=display:flex><span>vpnserver/lib/
</span></span><span style=display:flex><span>vpnserver/lib/libcharset.a
</span></span><span style=display:flex><span>vpnserver/lib/libcrypto.a
</span></span><span style=display:flex><span>vpnserver/lib/libedit.a
</span></span><span style=display:flex><span>vpnserver/lib/libiconv.a
</span></span><span style=display:flex><span>vpnserver/lib/libintelaes.a
</span></span><span style=display:flex><span>vpnserver/lib/libncurses.a
</span></span><span style=display:flex><span>vpnserver/lib/libssl.a
</span></span><span style=display:flex><span>vpnserver/lib/libz.a
</span></span><span style=display:flex><span>vpnserver/lib/License.txt
</span></span><span style=display:flex><span>vpnserver/hamcore.se2
</span></span></code></pre></div><h3 id=必要なソフトウェアやライブラリのインストール>必要なソフトウェアやライブラリのインストール<a hidden class=anchor aria-hidden=true href=#必要なソフトウェアやライブラリのインストール>#</a></h3><p>実行可能ファイルを生成するために必要なソフトウェアやライブラリをインストールする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo apt install build-essential -y
</span></span></code></pre></div><h3 id=実行可能ファイルの生成>実行可能ファイルの生成<a hidden class=anchor aria-hidden=true href=#実行可能ファイルの生成>#</a></h3><p>展開したディレクトリを開き、<code>make</code> を実行する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ cd softether
</span></span><span style=display:flex><span>$ make
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>The preparation of SoftEther VPN Server is completed !
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>make<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>: Leaving directory <span style=color:#e6db74>&#39;/home/hiro/tmp/vpnserver&#39;</span>
</span></span></code></pre></div><p><code>The preparation of SoftEther VPN Server is completed !</code> が表示されたらたぶん問題ない。</p><h3 id=vpn-server-の配置>VPN Server の配置<a hidden class=anchor aria-hidden=true href=#vpn-server-の配置>#</a></h3><p><code>/usr/local/vpnserver</code> に移動する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cd ..
</span></span><span style=display:flex><span>sudo mv vpnserver /usr/local
</span></span><span style=display:flex><span>cd /usr/local/
</span></span></code></pre></div><p>root 権限のみで読み書きできるように設定する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo chmod -R <span style=color:#ae81ff>600</span> vpnserver
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>700</span> vpnserver/vpncmd
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>700</span> vpnserver/vpnserver
</span></span><span style=display:flex><span>sudo chown -R root:root vpnserver
</span></span></code></pre></div><h3 id=動作チェック>動作チェック<a hidden class=anchor aria-hidden=true href=#動作チェック>#</a></h3><p><code>make</code> 実行時にもチェックはされているが、再度チェックしたい場合は <code>vpncmd</code> より <code>check</code> を実行する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo vpnserver/vpncmd
</span></span><span style=display:flex><span>vpncmd command - SoftEther VPN Command Line Management Utility
</span></span><span style=display:flex><span>SoftEther VPN Command Line Management Utility <span style=color:#f92672>(</span>vpncmd command<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Version 4.43 Build <span style=color:#ae81ff>9799</span>   <span style=color:#f92672>(</span>English<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Compiled 2023/08/31 10:50:49 by buildsan at crosswin with OpenSSL 3.0.9
</span></span><span style=display:flex><span>Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 2012-2023 SoftEther VPN Project. All Rights Reserved.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>By using vpncmd program, the following can be achieved.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. Management of VPN Server or VPN Bridge
</span></span><span style=display:flex><span>2. Management of VPN Client
</span></span><span style=display:flex><span>3. Use of VPN Tools <span style=color:#f92672>(</span>certificate creation and Network Traffic Speed Test Tool<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Select 1, <span style=color:#ae81ff>2</span> or 3: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VPN Tools has been launched. By inputting HELP, you can view a list of the commands that can be used.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VPN Tools&gt;check
</span></span><span style=display:flex><span>Check command - Check whether SoftEther VPN Operation is Possible
</span></span><span style=display:flex><span>---------------------------------------------------
</span></span><span style=display:flex><span>SoftEther VPN Operation Environment Check Tool
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> SoftEther VPN Project.
</span></span><span style=display:flex><span>All Rights Reserved.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>If this operation environment check tool is run on a system and that system passes, it is most likely that SoftEther VPN software can operate on that system. This check may take a <span style=color:#66d9ef>while</span>. Please wait...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Checking <span style=color:#e6db74>&#39;Kernel System&#39;</span>...
</span></span><span style=display:flex><span>              Pass
</span></span><span style=display:flex><span>Checking <span style=color:#e6db74>&#39;Memory Operation System&#39;</span>...
</span></span><span style=display:flex><span>              Pass
</span></span><span style=display:flex><span>Checking <span style=color:#e6db74>&#39;ANSI / Unicode string processing system&#39;</span>...
</span></span><span style=display:flex><span>              Pass
</span></span><span style=display:flex><span>Checking <span style=color:#e6db74>&#39;File system&#39;</span>...
</span></span><span style=display:flex><span>              Pass
</span></span><span style=display:flex><span>Checking <span style=color:#e6db74>&#39;Thread processing system&#39;</span>...
</span></span><span style=display:flex><span>              Pass
</span></span><span style=display:flex><span>Checking <span style=color:#e6db74>&#39;Network system&#39;</span>...
</span></span><span style=display:flex><span>              Pass
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>All checks passed. It is most likely that SoftEther VPN Server / Bridge can operate normally on this system.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The command completed successfully.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VPN Tools&gt;exit
</span></span></code></pre></div><h3 id=サービスの登録>サービスの登録<a hidden class=anchor aria-hidden=true href=#サービスの登録>#</a></h3><p>任意のエディタで、サービス呼び出しスクリプトを作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo vi /opt/vpnserver.sh
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>#!/bin/sh
</span></span><span style=display:flex><span># chkconfig: 2345 99 01
</span></span><span style=display:flex><span># description: SoftEther VPN Server
</span></span><span style=display:flex><span>DAEMON=/usr/local/vpnserver/vpnserver
</span></span><span style=display:flex><span>LOCK=/var/lock/subsys/vpnserver
</span></span><span style=display:flex><span>test -x $DAEMON || exit 0
</span></span><span style=display:flex><span>case &#34;$1&#34; in
</span></span><span style=display:flex><span>start)
</span></span><span style=display:flex><span>$DAEMON start
</span></span><span style=display:flex><span>touch $LOCK
</span></span><span style=display:flex><span>;;
</span></span><span style=display:flex><span>stop)
</span></span><span style=display:flex><span>$DAEMON stop
</span></span><span style=display:flex><span>rm $LOCK
</span></span><span style=display:flex><span>;;
</span></span><span style=display:flex><span>restart)
</span></span><span style=display:flex><span>$DAEMON stop
</span></span><span style=display:flex><span>sleep 3
</span></span><span style=display:flex><span>$DAEMON start
</span></span><span style=display:flex><span>;;
</span></span><span style=display:flex><span>*)
</span></span><span style=display:flex><span>echo &#34;Usage: $0 {start|stop|restart}&#34;
</span></span><span style=display:flex><span>exit 1
</span></span><span style=display:flex><span>esac
</span></span><span style=display:flex><span>exit 0
</span></span></code></pre></div><p>スクリプトの権限を変更する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>755</span> /opt/vpnserver.sh
</span></span><span style=display:flex><span>sudo chown root:root /opt/vpnserver.sh
</span></span></code></pre></div><p>任意のエディタで <code>/etc/systemd/system/vpnserver.service</code> を作成する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo vi /etc/systemd/system/vpnserver.service
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>[Unit]
</span></span><span style=display:flex><span>Description = vpnserver daemon
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[Service]
</span></span><span style=display:flex><span>ExecStart = /opt/vpnserver.sh start
</span></span><span style=display:flex><span>ExecStop = /opt/vpnserver.sh stop
</span></span><span style=display:flex><span>ExecReload = /opt/vpnserver.sh restart
</span></span><span style=display:flex><span>Restart = always
</span></span><span style=display:flex><span>Type = forking
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[Install]
</span></span><span style=display:flex><span>WantedBy = multi-user.target
</span></span></code></pre></div><p>サービスをリロードする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>sudo systemctl daemon-reload
</span></span></code></pre></div><p><code>vpnserver</code> サービスを有効化する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ sudo systemctl enable vpnserver.service
</span></span><span style=display:flex><span>Created symlink /etc/systemd/system/multi-user.target.wants/vpnserver.service → /etc/systemd/system/vpnserver.service.
</span></span></code></pre></div><h3 id=サービスの開始停止>サービスの開始・停止<a hidden class=anchor aria-hidden=true href=#サービスの開始停止>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e># 開始</span>
</span></span><span style=display:flex><span>sudo systemctl start vpnserver 
</span></span><span style=display:flex><span><span style=color:#75715e># 終了</span>
</span></span><span style=display:flex><span>sudo systemctl stop vpnserver 
</span></span><span style=display:flex><span><span style=color:#75715e># 再起動</span>
</span></span><span style=display:flex><span>sudo systemctl restart vpnserver 
</span></span></code></pre></div><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href=https://ja.softether.org/4-docs/1-manual/7/7.3>7.3 Linux へのインストールと初期設定 - SoftEther VPN プロジェクト</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://0x1feb.github.io/tags/ubuntu/>Ubuntu</a></li></ul><nav class=paginav><a class=prev href=https://0x1feb.github.io/posts/2024/04/14/connecting-to-samba-and-ssh-on-the-server-running-softether-vpn-server-via-vpn/><span class=title>« Prev</span><br><span>SoftEther VPN Server を動かしているサーバ上の Samba や SSH に VPN 経由で接続する</span>
</a><a class=next href=https://0x1feb.github.io/posts/2024/03/20/setting-up-a-file-server-using-samba-on-ubuntu-22.04.4/><span class=title>Next »</span><br><span>Ubuntu 22.04.4 で Samba を使ってファイルサーバを構築する</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://0x1feb.github.io/>0x1feb</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>